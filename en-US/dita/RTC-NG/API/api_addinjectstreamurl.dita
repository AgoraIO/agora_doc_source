<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_addinjectstreamurl">
    <title><ph keyref="addInjectStreamUrl"/></title>
    <shortdesc id="short"><ph id="shortdesc">Injects an online media stream to a live streaming channel.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="addInjectStreamUrl" />
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
            <codeblock props="android" outputclass="language-java">public abstract int addInjectStreamUrl(String url, LiveInjectStreamConfig config);</codeblock>
            <codeblock props="ios mac" outputclass="language-objectivec">- (int)addInjectStreamUrl:(NSString* _Nonnull)url config:(AgoraLiveInjectStreamConfig* _Nonnull)config;</codeblock>
            <codeblock props="cpp" outputclass="language-cpp">virtual int addInjectStreamUrl(const char* url, const InjectStreamConfig&amp; config) = 0;</codeblock>
            <codeblock props="electron" outputclass="language-typescript">abstract addInjectStreamUrl(url: string, config: InjectStreamConfig): number;</codeblock>
            <codeblock props="unity" outputclass="language-csharp">public abstract int AddInjectStreamUrl(string url, InjectStreamConfig config);</codeblock>
            <codeblock props="rn" outputclass="language-typescript"/>
            <codeblock props="flutter" outputclass="language-dart">Future&lt;void> addInjectStreamUrl(
    {required String url, required InjectStreamConfig config});</codeblock> </p>
        </section>
        <section id="detailed_desc">
            <note id="inject-sunset-note" type="caution">Agora will soon stop the service for injecting online media streams on the client. If you have not implemented this service, Agora recommends that you do not use it. 详见<xref keyref="rtc-sunset">部分服务下架计划</xref>。</note>
            <note type="attention">
            <ul>
            <li>请确保已开通旁路推流的功能，详见<xref keyref="guide-cdn-streaming">旁路推流</xref>中的前提条件。</li>
            <li>This method takes effect only when you are a host in a live streaming channel.</li>
            <li>Only one online media stream can be injected into the same channel at the same time.</li>
            <li>Call this method after joining a channel.</li>
            </ul> </note>
            <p>This method injects the currently playing audio and video as audio and video sources into the ongoing live broadcast. This applies to scenarios where all users in the channel can watch a live show and interact with each other. 调用该方法后，SDK 会在本地触发 <xref keyref="onStreamInjectedStatus" /> 回调，报告输入在线媒体流的状态；成功输入媒体流后，该音视频流会出现在频道中，频道内所有用户都会收到 <xref keyref="onUserJoined" /> 回调，其中 <parmname>uid</parmname> 为 666。</p>
        </section>
        <section id="parameters">
            <title>Parameters</title>
            <parml>
            <plentry>
                <pt>url</pt>
                <pd>
                    <p>The URL address to be added to the ongoing streaming. Valid protocols are RTMP, HLS, and HTTP-FLV.<ul>
                    <li>Supported audio codec type: AAC.</li>
                    <li>Supported video codec type: H264 (AVC).</li>
                    </ul> </p>
                </pd>
            </plentry>
            <plentry>
                <pt>config</pt>
                <pd>The configuration information for the added video stream. See <xref keyref="InjectStreamConfig" />.</pd>
            </plentry>
            </parml> </section>
        <section id="return_values" props="native electron unity rn">
            <title>Returns</title>
            <ul>
            <li>0: Success.</li>
            <li>&lt; 0: 方法调用失败

                <ul>
                <li><codeph>ERR_INVALID_ARGUMENT</codeph> (2): The injected URL does not exist. Call this method again to inject the stream and ensure that the URL is valid.</li>
                <li><codeph>ERR_NOT_READY</codeph> (3): The user is not in the channel.</li>
                <li><codeph>ERR_NOT_SUPPORTED</codeph> (4): The channel profile is not LIVE_BROADCASTING. Call <xref keyref="setChannelProfile" /> and set the channel profile as LIVE_BROADCASTING before calling this method.</li>
                <li><codeph>ERR_NOT_INITIALIZED</codeph> (7): The SDK is not<codeph> initialized</codeph>. Ensure that the <xref keyref="IRtcEngine" /> object is initialized before using this method.</li>
                </ul> </li>
            </ul> </section>
    </refbody>
</reference>
