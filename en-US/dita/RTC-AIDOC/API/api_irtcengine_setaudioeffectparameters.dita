<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_setaudioeffectparameters">
    <title><ph keyref="setAudioEffectParameters"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Sets parameters for the SDK's preset audio effects.</ph><ph id="shortdesc" props="android">Sets parameters for preset audio effects provided by the SDK.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="setAudioEffectParameters"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int setAudioEffectParameters(AUDIO_EFFECT_PRESET preset, int param1, int param2) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int setAudioEffectParameters(int preset, int param1, int param2);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <dl outputclass="since">
                <dlentry props="android">
                    <dt>Since</dt>
                    <dd>Available since v3.2.0.</dd>
                </dlentry>
            </dl>
            <p props="cpp">Call this method to set the following parameters for the local user who sends the audio stream:
                <ul>
                    <li><codeph>ROOM_ACOUSTICS_3D_VOICE</codeph>: Sets the cycle period for the voice to move around the user.</li>
                    <li><codeph>PITCH_CORRECTION</codeph>: Sets the pitch correction mode and tonic.</li>
                </ul><ph>Different songs may require different modes and tonics. Agora recommends binding this method to UI elements for users to interactively adjust pitch correction.</ph><ph>To achieve better voice effects, Agora recommends calling the following methods before this one:</ph>
                <ul>
                    <li>Call <xref keyref="setAudioScenario"/> to set the audio scenario to high-quality audio, that is, <codeph>AUDIO_SCENARIO_GAME_STREAMING</codeph> (3).</li>
                    <li>Call <codeph>setAudioProfile</codeph> and set <codeph>profile</codeph> to <codeph>AUDIO_PROFILE_MUSIC_HIGH_QUALITY</codeph> (4) or <codeph>AUDIO_PROFILE_MUSIC_HIGH_QUALITY_STEREO</codeph> (5).</li>
                </ul>
            </p>
            <p props="android">Call this method to set the following parameters for the local user who sends the audio stream:
                <ul>
                    <li>3D voice effect: Sets the cycle period of the 3D voice.</li>
                    <li>Pitch correction effect: Sets the basic mode and tonic of pitch correction.</li>
                </ul><ph>Agora recommends binding this method to UI elements to allow users to interactively adjust pitch correction effects.</ph><ph>To achieve better voice effects, it is recommended to call the following APIs before calling this method:</ph>
                <ul>
                    <li>Call <xref keyref="setAudioScenario"/> to set the audio scenario to high-quality audio, i.e., <codeph>AUDIO_SCENARIO_GAME_STREAMING</codeph> (3).</li>
                    <li>Call <codeph>setAudioProfile</codeph> and set <codeph>profile</codeph> to <codeph>MUSIC_HIGH_QUALITY</codeph> (4) or <codeph>MUSIC_HIGH_QUALITY_STEREO</codeph> (5).</li>
                </ul>
            </p>
            <note props="cpp">
                <ul>
                    <li>Do not set the <codeph>profile</codeph> in <codeph>setAudioProfile</codeph> to <codeph>AUDIO_PROFILE_SPEECH_STANDARD</codeph> (1) or <codeph>AUDIO_PROFILE_IOT</codeph> (6), or this method will not take effect.</li>
                    <li>This method works best for voice processing and is not recommended for audio that contains music.</li>
                    <li>After calling <xref keyref="setAudioEffectParameters"/>, do not call the following methods, or the settings will be overridden:
                        <ul>
                            <li><xref keyref="setAudioEffectPreset"/></li>
                            <li><xref keyref="setVoiceBeautifierPreset"/></li>
                            <li><xref keyref="setLocalVoicePitch"/></li>
                            <li><xref keyref="setLocalVoiceEqualization"/></li>
                            <li><xref keyref="setLocalVoiceReverb"/></li>
                            <li><xref keyref="setVoiceBeautifierParameters"/></li>
                            <li><xref keyref="setVoiceConversionPreset"/></li>
                        </ul>
                    </li>
                    <li>This method depends on the voice beautifier dynamic library <xref keyref="audiobeauty"/>. If the library is deleted, this feature cannot be enabled.</li>
                </ul>
            </note>
            <note props="android">
                <ul>
                    <li>You can call this method before or after joining a channel.</li>
                    <li>Do not set <codeph>profile</codeph> in <codeph>setAudioProfile</codeph> to <codeph>SPEECH_STANDARD</codeph> (1), otherwise this method will not take effect.</li>
                    <li>This method works best for voice processing and is not recommended for audio data containing music.</li>
                    <li>After calling <xref keyref="setAudioEffectParameters"/>, it is not recommended to call the following methods, otherwise the effects set by this method will be overridden:
                        <ul>
                            <li><xref keyref="setAudioEffectPreset"/></li>
                            <li><xref keyref="setVoiceBeautifierPreset"/></li>
                            <li><xref keyref="setLocalVoicePitch"/></li>
                            <li><xref keyref="setLocalVoiceEqualization"/></li>
                            <li><xref keyref="setLocalVoiceReverb"/></li>
                            <li><xref keyref="setVoiceBeautifierParameters"/></li>
                            <li><xref keyref="setVoiceConversionPreset"/></li>
                        </ul>
                    </li>
                    <li>This method depends on the voice beautifier dynamic library <xref keyref="audiobeauty"/>. If the library is deleted, the feature cannot be enabled properly.</li>
                </ul>
            </note>
        </section>
        <section id="timing" deliveryTarget="details" props="cpp">
            <title>Timing</title>
            <p props="cpp">You can call this method before or after joining a channel.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>preset</pt>
                    <pd>SDK preset audio effect options:
                        <ul>
                            <li><codeph>ROOM_ACOUSTICS_3D_VOICE</codeph> (3): 3D voice effect.
                                <ul>
                                    <li>Before setting this value, set the <codeph>profile</codeph> in <codeph>setAudioProfile</codeph> to <codeph>AUDIO_PROFILE_MUSIC_STANDARD_STEREO</codeph> (3) or <codeph>AUDIO_PROFILE_MUSIC_HIGH_QUALITY_STEREO</codeph> (5), or it will not take effect.</li>
                                    <li>After enabling, users must use stereo playback devices to hear the expected effect.</li>
                                </ul>
                            </li>
                            <li><codeph>PITCH_CORRECTION</codeph> (10): Pitch correction effect.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>param1</pt>
                    <pd>
                        <ul>
                            <li>When <codeph>preset</codeph> is <codeph>ROOM_ACOUSTICS_3D_VOICE</codeph>, sets the cycle period of the 3D voice effect in seconds. Range: [1, 60], default is 10, meaning the voice moves around you every 10 seconds.</li>
                            <li>When <codeph>preset</codeph> is <codeph>PITCH_CORRECTION</codeph>, sets the pitch correction mode:
                                <ul>
                                    <li><codeph>1</codeph>: (Default) Natural major scale.</li>
                                    <li><codeph>2</codeph>: Natural minor scale.</li>
                                    <li><codeph>3</codeph>: Japanese pentatonic scale.</li>
                                </ul>
                            </li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>param2</pt>
                    <pd>
                        <ul>
                            <li>When <codeph>preset</codeph> is <codeph>ROOM_ACOUSTICS_3D_VOICE</codeph>, set <codeph>param2</codeph> to <codeph>0</codeph>.</li>
                            <li>When <codeph>preset</codeph> is <codeph>PITCH_CORRECTION</codeph>, sets the tonic:
                                <ul>
                                    <li><codeph>1</codeph>: A</li>
                                    <li><codeph>2</codeph>: A#</li>
                                    <li><codeph>3</codeph>: B</li>
                                    <li><codeph>4</codeph>: (Default) C</li>
                                    <li><codeph>5</codeph>: C#</li>
                                    <li><codeph>6</codeph>: D</li>
                                    <li><codeph>7</codeph>: D#</li>
                                    <li><codeph>8</codeph>: E</li>
                                    <li><codeph>9</codeph>: F</li>
                                    <li><codeph>10</codeph>: F#</li>
                                    <li><codeph>11</codeph>: G</li>
                                    <li><codeph>12</codeph>: G#</li>
                                </ul>
                            </li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>preset</pt>
                    <pd>Preset audio effect options provided by the SDK:
                        <ul>
                            <li><codeph>ROOM_ACOUSTICS_3D_VOICE</codeph>: 3D voice effect.
                                <ul>
                                    <li>Before setting this enum value, you must set <codeph>profile</codeph> in <codeph>setAudioProfile</codeph> to <codeph>MUSIC_STANDARD_STEREO</codeph> (3) or <codeph>MUSIC_HIGH_QUALITY_STEREO</codeph> (5), otherwise the setting will not take effect.</li>
                                    <li>After enabling this effect, users must use stereo playback devices to hear the expected result.</li>
                                </ul>
                            </li>
                            <li><codeph>PITCH_CORRECTION</codeph>: Pitch correction effect.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>param1</pt>
                    <pd>
                        <ul>
                            <li>When <codeph>preset</codeph> is <codeph>ROOM_ACOUSTICS_3D_VOICE</codeph>, this parameter indicates the cycle period of the 3D voice effect in seconds. The range is [1,60], and the default is 10, meaning the sound circles around you every 10 seconds.</li>
                            <li>When <codeph>preset</codeph> is <codeph>PITCH_CORRECTION</codeph>, this parameter indicates the basic mode of pitch correction:
                                <ul>
                                    <li><codeph>1</codeph>: (Default) Natural major.</li>
                                    <li><codeph>2</codeph>: Natural minor.</li>
                                    <li><codeph>3</codeph>: Japanese pentatonic scale.</li>
                                </ul>
                            </li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>param2</pt>
                    <pd>
                        <ul>
                            <li>When <codeph>preset</codeph> is <codeph>ROOM_ACOUSTICS_3D_VOICE</codeph>, set <codeph>param2</codeph> to <codeph>0</codeph>.</li>
                            <li>When <codeph>preset</codeph> is <codeph>PITCH_CORRECTION</codeph>, this parameter indicates the tonic of pitch correction:
                                <ul>
                                    <li><codeph>1</codeph>: A</li>
                                    <li><codeph>2</codeph>: A#</li>
                                    <li><codeph>3</codeph>: B</li>
                                    <li><codeph>4</codeph>: (Default) C</li>
                                    <li><codeph>5</codeph>: C#</li>
                                    <li><codeph>6</codeph>: D</li>
                                    <li><codeph>7</codeph>: D#</li>
                                    <li><codeph>8</codeph>: E</li>
                                    <li><codeph>9</codeph>: F</li>
                                    <li><codeph>10</codeph>: F#</li>
                                    <li><codeph>11</codeph>: G</li>
                                    <li><codeph>12</codeph>: G#</li>
                                </ul>
                            </li>
                        </ul>
                    </pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>