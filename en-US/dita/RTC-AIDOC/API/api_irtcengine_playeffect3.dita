<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_playeffect3">
    <title><ph keyref="playEffect3"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Plays the specified local or online audio effect file.</ph><ph id="shortdesc" props="android">Plays the specified local or online audio effect file.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="playEffect3"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int playEffect(int soundId, const char* filePath, int loopCount, double pitch, double pan, int gain, bool publish = false, int startPos = 0) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int playEffect(int soundId, String filePath, int loopCount, double pitch, double pan, double gain, boolean publish, int startPos);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">After calling <xref keyref="preloadEffect"/>, you can call this method to play the specified audio effect for all users in the channel. Each call to this method can only play one audio effect. To play multiple audio effects simultaneously, call this method multiple times. For the best user experience, Agora recommends not playing more than three audio effect files at the same time.</p>
            <p props="android">This method supports playing URI files that start with <codeph>content://</codeph>. For supported audio file formats, see <codeph>What formats of audio files does the Agora RTC SDK support</codeph>. If the local audio file does not exist, the SDK does not support the file format, or the audio file URL is inaccessible, the SDK reports <codeph>AUDIO_MIXING_REASON_CAN_NOT_OPEN</codeph>.</p>
            <note props="cpp">
                <ul>
                    <li>If you need to play an online audio effect file, Agora recommends caching it to the local device first, preloading it into memory using <xref keyref="preloadEffect"/>, and then calling this method to play the effect. Otherwise, playback may fail or be silent due to loading timeout or failure.</li>
                    <li>The audio effect ID and file path in this method must be the same as those in <xref keyref="preloadEffect"/>.</li>
                    <li>If you call <xref keyref="preloadEffect"/> before <xref keyref="playEffect3"/>, the file resource will not be closed after <xref keyref="playEffect3"/> is executed. The next time <xref keyref="playEffect3"/> is called, it will start playing from the beginning.</li>
                    <li>If you do not call <xref keyref="preloadEffect"/> before <xref keyref="playEffect3"/>, the resource will be destroyed after <xref keyref="playEffect3"/> is executed. The next time <xref keyref="playEffect3"/> is called, it will try to reopen the file and play from the beginning.</li>
                </ul>
            </note>
            <note props="android">
                <ul>
                    <li>If you need to play an online audio effect file, it is recommended to first cache it to the local device, call <codeph>preloadEffect</codeph> to preload the file into memory, and then call this method to play it. Otherwise, playback may fail or be silent due to timeout or loading failure.</li>
                    <li>If <codeph>preloadEffect</codeph> is called before <codeph>playEffect</codeph>, the file resource will not be closed after <codeph>playEffect</codeph> is executed. The next call to <codeph>playEffect</codeph> will start playback from the beginning.</li>
                    <li>If <codeph>playEffect</codeph> is called without first calling <codeph>preloadEffect</codeph>, the resource will be destroyed after playback ends. The next call to <codeph>playEffect</codeph> will attempt to reopen the file and play from the beginning.</li>
                </ul>
            </note>
        </section>
        <section id="timing" deliveryTarget="details" props="android cpp">
            <title>Timing</title>
            <p props="cpp">You can call this method either before or after joining a channel.</p>
            <p props="android">You can call this method before or after joining a channel.</p>
        </section>
        <section id="related" deliveryTarget="details" props="android cpp">
            <title>Related Callbacks</title>
            <p props="cpp">After this method is successfully called, the SDK triggers the <xref keyref="onAudioEffectFinished"/> callback to report the completion of the audio effect playback.</p>
            <p props="android">After the audio effect file finishes playing, the SDK triggers the <xref keyref="onAudioEffectFinished"/> callback.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>soundId</pt>
                    <pd>The audio effect ID. The ID of each audio effect file must be unique. If you have preloaded the audio effect into memory using <xref keyref="preloadEffect"/>, ensure that this parameter value is the same as the <codeph>soundId</codeph> in <xref keyref="preloadEffect"/>.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>filePath</pt>
                    <pd>The absolute path of the local audio effect file or the URL of the online audio effect file. Supported audio formats include: mp3, mp4, m4a, aac, 3gp, mkv, and wav.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>loopCount</pt>
                    <pd>The number of times to loop the audio effect:
                        <ul>
                            <li><codeph>-1</codeph>: Loop indefinitely until <xref keyref="stopEffect"/> or <xref keyref="stopAllEffects"/> is called.</li>
                            <li><codeph>0</codeph>: Play once.</li>
                            <li><codeph>1</codeph>: Play twice.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>pitch</pt>
                    <pd>The pitch of the audio effect. The range is from 0.5 to 2.0, with the default value being <codeph>1.0</codeph> (original pitch). The smaller the value, the lower the pitch.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>pan</pt>
                    <pd>The spatial position of the audio effect. The range is from -1.0 to 1.0:
                        <ul>
                            <li><codeph>-1.0</codeph>: Audio effect is positioned to the left.</li>
                            <li><codeph>0.0</codeph>: Audio effect is centered.</li>
                            <li><codeph>1.0</codeph>: Audio effect is positioned to the right.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>gain</pt>
                    <pd>The volume of the audio effect. The range is from 0 to 100, with the default value being <codeph>100</codeph> (original volume). The smaller the value, the lower the volume.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>publish</pt>
                    <pd>Whether to publish the audio effect to remote users:
                        <ul>
                            <li><xref keyref="true"/>: Publish the audio effect to remote users. Both local and remote users can hear it.</li>
                            <li><xref keyref="false"/>: (Default) Do not publish the audio effect to remote users. Only the local user can hear it.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>startPos</pt>
                    <pd>The start position for playing the audio effect file, in milliseconds.</pd>
                </plentry>
                <plentry props="android">
                    <pt>soundId</pt>
                    <pd>Audio effect ID. Each audio effect file has a unique ID.
                        <note>If you have preloaded the audio effect into memory by calling <codeph>preloadEffect</codeph>, ensure that this parameter matches the <codeph>soundId</codeph> used in <codeph>preloadEffect</codeph>.</note>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>filePath</pt>
                    <pd>File path. Supports URIs starting with <codeph>content://</codeph>, paths starting with <codeph>/assets/</codeph>, URLs, and absolute paths of local files. The path must include the file name and extension. Supported audio formats include MP3, AAC, M4A, MP4, WAV, and 3GP.
                        <note>If you have preloaded the audio effect into memory by calling <codeph>preloadEffect</codeph>, ensure that this parameter matches the <codeph>filePath</codeph> used in <codeph>preloadEffect</codeph>.</note>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>loopCount</pt>
                    <pd>Number of times the audio effect is looped:
                        <ul>
                            <li>â‰¥ 0: Number of loops. For example, 1 means loop once, i.e., play twice in total.</li>
                            <li>-1: Loop the audio file indefinitely.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>pitch</pt>
                    <pd>Pitch of the audio effect. Value range is 0.5 to 2.0. Default is 1.0, which means original pitch. The smaller the value, the lower the pitch.</pd>
                </plentry>
                <plentry props="android">
                    <pt>pan</pt>
                    <pd>Spatial position of the audio effect. Value range is -1.0 to 1.0:
                        <ul>
                            <li>-1.0: Audio plays from the user's left.</li>
                            <li>0.0: Audio plays from the front.</li>
                            <li>1.0: Audio plays from the user's right.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>gain</pt>
                    <pd>Volume of the audio effect. Value range is 0.0 to 100.0. Default is 100.0, which means original volume. The smaller the value, the lower the volume.</pd>
                </plentry>
                <plentry props="android">
                    <pt>publish</pt>
                    <pd>Whether to publish the audio effect to remote users:
                        <ul>
                            <li><xref keyref="true"/>: Publish the audio effect to remote users. Both local and remote users can hear it.</li>
                            <li><xref keyref="false"/>: Do not publish the audio effect to remote users. Only the local user can hear it.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>startPos</pt>
                    <pd>Start position of the audio effect file in milliseconds.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="android">0: Success.
&lt; 0: Failure.</p>
        </section>
    </refbody>
</reference>