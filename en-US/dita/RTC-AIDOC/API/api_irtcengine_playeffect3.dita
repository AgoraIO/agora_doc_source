<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_playeffect3">
    <title><ph keyref="playEffect3"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Plays the specified local or online sound effect file.</ph><ph id="shortdesc" props="android">Plays the specified local or online audio effect file.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="playEffect3"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int playEffect(int soundId, const char* filePath, int loopCount, double pitch, double pan, int gain, bool publish = false, int startPos = 0) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int playEffect(int soundId, String filePath, int loopCount, double pitch, double pan, double gain, boolean publish, int startPos);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">To play multiple sound effect files simultaneously, call this method multiple times with different <codeph>soundId</codeph> and <codeph>filePath</codeph>. For the best user experience, Agora recommends not playing more than three sound effect files at the same time.</p>
            <p props="android">This method supports playing URI files that start with <codeph>content://</codeph>. For supported audio file formats, see [What audio file formats does the Agora RTC SDK support](https://doc.shengwang.cn/faq/general-product-inquiry/audio-format). If the local audio file does not exist, the SDK does not support the file format, or the audio file URL cannot be accessed, the SDK returns the error code <codeph>AUDIO_MIXING_REASON_CAN_NOT_OPEN</codeph>.</p>
            <note props="cpp">If you need to play online sound effect files, Agora recommends caching them to the local device first, preloading them into memory with <xref keyref="preloadEffect"/>, and then calling this method to play the sound effect. Otherwise, playback may fail or be silent due to loading timeout or failure.
If <xref keyref="preloadEffect"/> is called before <xref keyref="playEffect3"/>, the file resource will not be closed after <xref keyref="playEffect3"/> is executed. The next call to <xref keyref="playEffect3"/> will start playback from the beginning.
If <xref keyref="preloadEffect"/> is not called before <xref keyref="playEffect3"/>, the resource will be destroyed after <xref keyref="playEffect3"/> is executed. The next call to <xref keyref="playEffect3"/> will attempt to reopen the file and play from the beginning.</note>
            <note props="android">If you need to play an online audio effect file, Agora recommends caching it to the local device first, preloading the file into memory using <codeph>preloadEffect</codeph>, and then calling this method to play the effect. Otherwise, playback may fail or be silent due to timeout or loading failure.</note>
        </section>
        <section id="timing" deliveryTarget="details" props="android cpp">
            <title>Timing</title>
            <p props="cpp">You can call this method before or after joining a channel.</p>
            <p props="android">You can call this method before or after joining a channel.</p>
        </section>
        <section id="related" deliveryTarget="details" props="android cpp">
            <title>Related Callbacks</title>
            <p props="cpp">After this method is successfully called, the SDK triggers the <xref keyref="onAudioEffectFinished"/> callback to report the completion of sound effect playback.</p>
            <p props="android">After the audio effect file finishes playing, the SDK triggers the <xref keyref="onAudioEffectFinished"/> callback.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>soundId</pt>
                    <pd>Sound effect ID. Each sound effect file has a unique ID. If <xref keyref="preloadEffect"/> is called to preload the sound effect into memory, ensure this parameter matches the <codeph>soundId</codeph> in <xref keyref="preloadEffect"/>.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>filePath</pt>
                    <pd>File path. Supports URL and absolute path of local files. The path must include the file name and extension. Supported audio formats include MP3, AAC, M4A, MP4, WAV, and 3GP. See [What audio file formats does Agora RTC SDK support](https://doc.shengwang.cn/faq/general-product-inquiry/audio-format). If <xref keyref="preloadEffect"/> is called to preload the sound effect into memory, ensure this parameter matches the <codeph>filePath</codeph> in <xref keyref="preloadEffect"/>.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>loopCount</pt>
                    <pd>Number of times to loop the sound effect:
                        <ul>
                            <li>≥ 0: Number of times to play. For example, 1 means loop once, i.e., play twice in total.</li>
                            <li>-1: Loop the sound effect indefinitely.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>pitch</pt>
                    <pd>Pitch of the sound effect. Range: 0.5 to 2.0. The default value is 1.0, which represents the original pitch. The smaller the value, the lower the pitch.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>pan</pt>
                    <pd>Spatial position of the sound effect. Range: -1.0 to 1.0:
                        <ul>
                            <li>-1.0: Sound effect comes from the user's left.</li>
                            <li>0.0: Sound effect comes from the front.</li>
                            <li>1.0: Sound effect comes from the user's right.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>gain</pt>
                    <pd>Volume of the sound effect. Range: 0.0 to 100.0. The default value is 100.0, which represents the original volume. The smaller the value, the lower the volume.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>publish</pt>
                    <pd>Whether to publish the sound effect to remote users:
                        <ul>
                            <li><xref keyref="true"/>: Publish the sound effect to remote users. Both local and remote users can hear it.</li>
                            <li><xref keyref="false"/>: (Default) Do not publish the sound effect to remote users. Only the local user can hear it.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>startPos</pt>
                    <pd>Start position of the sound effect file in milliseconds.</pd>
                </plentry>
                <plentry props="android">
                    <pt>soundId</pt>
                    <pd>Audio effect ID. Each audio effect file must have a unique ID.
                        <note>If you have preloaded the audio effect into memory using <codeph>preloadEffect</codeph>, make sure this parameter value is the same as the <codeph>soundId</codeph> used in <codeph>preloadEffect</codeph>.</note>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>filePath</pt>
                    <pd>Path of the audio effect file. Supports URI addresses starting with <codeph>content://</codeph>, paths starting with <codeph>/assets/</codeph>, URLs, and absolute paths of local files. The path must include the file name and extension. Supported audio formats include MP3, AAC, M4A, MP4, WAV, and 3GP.
                        <note>If you have preloaded the audio effect into memory using <codeph>preloadEffect</codeph>, make sure this parameter value is the same as the <codeph>filePath</codeph> used in <codeph>preloadEffect</codeph>.</note>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>loopCount</pt>
                    <pd>Number of times the audio effect loops:
                        <ul>
                            <li>≥ 0: Number of times to play. For example, 1 means loop once, i.e., play twice in total.</li>
                            <li>-1: Loop the audio file indefinitely.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>pitch</pt>
                    <pd>Pitch of the audio effect. The range is from 0.5 to 2.0. The default value is 1.0, which represents the original pitch. The smaller the value, the lower the pitch.</pd>
                </plentry>
                <plentry props="android">
                    <pt>pan</pt>
                    <pd>Spatial position of the audio effect. The range is from -1.0 to 1.0:
                        <ul>
                            <li>-1.0: Audio effect plays from the user's left.</li>
                            <li>0.0: Audio effect plays from the front.</li>
                            <li>1.0: Audio effect plays from the user's right.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>gain</pt>
                    <pd>Volume of the audio effect. The range is from 0.0 to 100.0. The default value is 100.0, which represents the original volume. The smaller the value, the lower the volume.</pd>
                </plentry>
                <plentry props="android">
                    <pt>publish</pt>
                    <pd>Whether to publish the audio effect to remote users:
                        <ul>
                            <li><xref keyref="true"/>: Publish the audio effect to remote users. Both local and remote users can hear it.</li>
                            <li><xref keyref="false"/>: Do not publish the audio effect to remote users. Only the local user can hear it.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>startPos</pt>
                    <pd>The starting position for playing the audio effect file, in milliseconds.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>