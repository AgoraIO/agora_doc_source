<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_sendstreammessage">
    <title><ph keyref="sendStreamMessage"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Sends a data stream message.</ph><ph id="shortdesc" props="android">Sends a data stream message.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="sendStreamMessage"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int sendStreamMessage(int streamId, const char* data, size_t length) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int sendStreamMessage(int streamId, byte[] message);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">After calling <codeph>createDataStream</codeph>, you can call this method to send data stream messages to all users in the channel.</p>
            <p props="android">After calling <codeph>createDataStream</codeph>, you can use this method to send data stream messages to all users in the channel. The SDK imposes the following limits:
                <ul>
                    <li>Each client instance in the channel can have up to 5 data channels. The total bitrate shared by all channels is limited to 30 KB/s.</li>
                    <li>Each data channel can send up to 60 data packets per second, with a maximum size of 1 KB per packet.</li>
                </ul>
            </p>
            <note props="cpp">
                <ul>
                    <li>If you need a more comprehensive solution for low-latency, high-concurrency, and scalable real-time messaging and state synchronization, we recommend using Real-time Messaging.</li>
                    <li>This method must be called after <codeph>createDataStream</codeph> and joining the channel.</li>
                    <li>This method is only applicable to the host role.</li>
                </ul>
            </note>
            <note props="android">
                <ul>
                    <li>If you require a more comprehensive real-time messaging and state synchronization solution with low latency, high concurrency, and scalability, consider using Real-time Messaging.</li>
                    <li>You must call this method after calling <codeph>createDataStream</codeph> and joining a channel.</li>
                    <li>This method is only applicable to the broadcaster role.</li>
                </ul>
            </note>
        </section>
        <section id="related" deliveryTarget="details" props="android cpp">
            <title>Related Callbacks</title>
            <p props="cpp">After this method is successfully called, the SDK triggers the <xref keyref="onStreamMessage"/> callback. Remote users can receive the data stream message through this callback. If the call fails, the SDK triggers the remote <xref keyref="onStreamMessageError"/> callback.</p>
            <p props="android">If the call succeeds, the remote client receives the <xref keyref="onStreamMessage"/> callback and can get the message. If it fails, the remote client receives the <xref keyref="onStreamMessageError"/> callback.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>streamId</pt>
                    <pd>Data stream ID, obtained by calling <codeph>createDataStream</codeph>.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>data</pt>
                    <pd>The content of the message to be sent.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>length</pt>
                    <pd>Length of the data content.</pd>
                </plentry>
                <plentry props="android">
                    <pt>streamId</pt>
                    <pd>The ID of the data stream, obtained by calling <codeph>createDataStream</codeph>.</pd>
                </plentry>
                <plentry props="android">
                    <pt>message</pt>
                    <pd>The content of the message to be sent.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: The method call succeeds.</li>
                    <li>&lt; 0: The method call fails.</li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>