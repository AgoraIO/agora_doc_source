<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_ivideoframeobserver_getobservedframeposition">
    <title><ph keyref="getObservedFramePosition"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Sets the frame position for the video observer.</ph><ph id="shortdesc" props="android">Sets the frame position for the video observer.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="getObservedFramePosition"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual uint32_t getObservedFramePosition()</codeblock>
                <codeblock props="android" outputclass="language-java">@CalledByNative int getObservedFramePosition();</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">After successfully registering the video data observer, the SDK uses this callback to determine whether to trigger the <xref keyref="onCaptureVideoFrame"/>, <xref keyref="onRenderVideoFrame"/>, and <xref keyref="onPreEncodeVideoFrame"/> callbacks at specific video frame processing positions, so that you can observe the locally captured video data, remotely received video data, and pre-encoded video data. You can set one or more positions to observe by modifying the return value according to actual scenarios:
                <ul>
                    <li><codeph>POSITION_POST_CAPTURER</codeph> (1 &lt;&lt; 0): Position after video capture, corresponds to <xref keyref="onCaptureVideoFrame"/> callback.</li>
                    <li><codeph>POSITION_PRE_RENDERER</codeph> (1 &lt;&lt; 1): Position before rendering remote video data, corresponds to <xref keyref="onRenderVideoFrame"/> callback.</li>
                    <li><codeph>POSITION_PRE_ENCODER</codeph> (1 &lt;&lt; 2): Position before encoding, corresponds to <xref keyref="onPreEncodeVideoFrame"/> callback.</li>
                </ul>
            </p>
            <p props="android">After successfully registering the video data observer, the SDK uses this callback to determine whether to trigger the <xref keyref="onCaptureVideoFrame"/>, <xref keyref="onRenderVideoFrame"/>, and <xref keyref="onPreEncodeVideoFrame"/> callbacks at specific video frame processing positions. You can set one or more positions to observe by modifying the return value based on your business scenario:
                <ul>
                    <li><codeph>VIDEO_MODULE_POSITION_POST_CAPTURER</codeph> (1 &lt;&lt; 0): After video capture, corresponds to <xref keyref="onCaptureVideoFrame"/> callback.</li>
                    <li><codeph>VIDEO_MODULE_POSITION_PRE_RENDERER</codeph> (1 &lt;&lt; 1): Before rendering remote video, corresponds to <xref keyref="onRenderVideoFrame"/> callback.</li>
                    <li><codeph>VIDEO_MODULE_POSITION_PRE_ENCODER</codeph> (1 &lt;&lt; 2): Before encoding, corresponds to <xref keyref="onPreEncodeVideoFrame"/> callback.</li>
                </ul>
            </p>
            <note props="cpp">
                <ul>
                    <li>Use <codeph>|</codeph> (bitwise OR operator) to set multiple observation positions.</li>
                    <li>The default observation positions are <codeph>POSITION_POST_CAPTURER</codeph> (1 &lt;&lt; 0) and <codeph>POSITION_PRE_RENDERER</codeph> (1 &lt;&lt; 1).</li>
                    <li>To save system resources, it is recommended to reduce the number of observation positions.</li>
                    <li>When the video processing mode is <codeph>PROCESS_MODE_READ_WRITE</codeph> and the observation position is <codeph>POSITION_PRE_ENCODER | POSITION_POST_CAPTURER</codeph>, <xref keyref="getMirrorApplied"/> does not take effect. You need to modify the video processing mode or observation position.</li>
                </ul>
            </note>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">If the method call succeeds, it returns a bitmask used to control the frame position of the video observer. See <xref keyref="VIDEO_MODULE_POSITION"/>.</p>
            <p props="android">If the method call succeeds, returns the bitmask used to control the frame position for the video observer:
                <ul>
                    <li><codeph>VIDEO_MODULE_POSITION_POST_CAPTURER</codeph> (1 &lt;&lt; 0): After video capture.</li>
                    <li><codeph>VIDEO_MODULE_POSITION_PRE_RENDERER</codeph> (1 &lt;&lt; 1): Before rendering remote video.</li>
                    <li><codeph>VIDEO_MODULE_POSITION_PRE_ENCODER</codeph> (1 &lt;&lt; 2): Before encoding.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>