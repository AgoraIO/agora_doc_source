<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengineex_preloadeffectex">
    <title><ph keyref="preloadEffectEx"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Preloads the specified sound effect into the channel.</ph><ph id="shortdesc" props="android">Preloads the specified audio effect into the channel.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="preloadEffectEx"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int preloadEffectEx(const RtcConnection&amp; connection, int soundId, const char* filePath, int startPos = 0) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int preloadEffectEx(RtcConnection connection, int soundId, String filePath, int startPos);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <dl outputclass="since">
                <dlentry props="cpp">
                    <dt>Since</dt>
                    <dd>Available since v4.6.0.</dd>
                </dlentry>
                <dlentry props="android">
                    <dt>Since</dt>
                    <dd>Added since v4.6.0.</dd>
                </dlentry>
            </dl>
            <p props="cpp">Each time you call this method, you can preload only one sound effect file into memory. To preload multiple sound effect files, call this method multiple times. After preloading is complete, you can call <xref keyref="playEffect3"/> to play the preloaded sound effect, or call <xref keyref="playAllEffects"/> to play all preloaded sound effects.</p>
            <p props="android">Each call to this method can preload only one audio effect file into memory. To preload multiple audio effect files, call this method multiple times. After preloading, you can call <codeph>playEffect</codeph> to play the preloaded audio effect, or call <xref keyref="playAllEffects"/> to play all preloaded audio effects.</p>
            <note props="cpp">
                <ul>
                    <li>To ensure a smooth user experience, the size of the sound effect file should not exceed the limit.</li>
                    <li>Agora recommends calling this method before joining a channel.</li>
                    <li>If you call <xref keyref="preloadEffectEx"/> before calling <xref keyref="playEffectEx"/>, the file resource will not be closed after <xref keyref="playEffectEx"/> is executed. The next time you call <xref keyref="playEffectEx"/>, playback will start from the beginning.</li>
                    <li>If you do not call <xref keyref="preloadEffectEx"/> before calling <xref keyref="playEffectEx"/>, the resource will be destroyed after <xref keyref="playEffectEx"/> is executed. The next time you call <xref keyref="playEffectEx"/>, it will attempt to reopen the file and start playback from the beginning.</li>
                </ul>
            </note>
            <note props="android">
                <ul>
                    <li>To ensure a smooth experience, the size of the audio effect file should not exceed the limit.</li>
                    <li>Agora recommends calling this method before joining a channel.</li>
                    <li>If <codeph>preloadEffectEx</codeph> is called before <codeph>playEffectEx</codeph>, then after <codeph>playEffectEx</codeph> is executed, the file resource will not be closed. The next call to <codeph>playEffectEx</codeph> will start playback from the beginning.</li>
                    <li>If <codeph>preloadEffectEx</codeph> is not called before <codeph>playEffectEx</codeph>, then after <codeph>playEffectEx</codeph> is executed, the file resource will be destroyed. The next call to <codeph>playEffectEx</codeph> will attempt to reopen the file and play from the beginning.</li>
                </ul>
            </note>
        </section>
        <section id="scenario" deliveryTarget="details">
            <title>Scenario</title>
            <p>This method applies to multi-channel scenarios.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>soundId</pt>
                    <pd>Sound effect ID.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>filePath</pt>
                    <pd>The absolute path of the local file or the URL of the online file. Supported audio formats include: mp3, mp4, m4a, aac, 3gp, mkv, and wav.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>startPos</pt>
                    <pd>The starting position (in milliseconds) for playing the sound effect file.</pd>
                </plentry>
                <plentry props="android">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="android">
                    <pt>soundId</pt>
                    <pd>Audio effect ID.</pd>
                </plentry>
                <plentry props="android">
                    <pt>filePath</pt>
                    <pd>Absolute path of a local file or URL of an online file. Supported audio formats include: mp3, mp4, m4a, aac, 3gp, mkv, and wav.</pd>
                </plentry>
                <plentry props="android">
                    <pt>startPos</pt>
                    <pd>Start position of the audio effect file in milliseconds.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>