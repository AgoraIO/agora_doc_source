<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_setvoiceconversionpreset">
    <title><ph keyref="setVoiceConversionPreset"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Sets the preset voice conversion effects.</ph><ph id="shortdesc" props="android">Sets the SDK's preset voice conversion effects.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="setVoiceConversionPreset"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int setVoiceConversionPreset(VOICE_CONVERSION_PRESET preset) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int setVoiceConversionPreset(int preset);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <dl outputclass="since">
                <dlentry props="android">
                    <dt>Since</dt>
                    <dd>Available since v3.3.1.</dd>
                </dlentry>
            </dl>
            <p props="cpp">Call this method to set a preset voice conversion effect for the local user who sends the audio stream. Once set, all users in the channel hear the effect. You can set different voice effects for users based on different scenarios.
To achieve better voice effects, Agora recommends calling the following methods before this one:
                <ul>
                    <li>Call <xref keyref="setAudioScenario"/> to set the audio scenario to high-quality audio, that is, <codeph>AUDIO_SCENARIO_GAME_STREAMING</codeph> (3).</li>
                    <li>Call <codeph>setAudioProfile</codeph> and set the <codeph>profile</codeph> parameter to <codeph>AUDIO_PROFILE_MUSIC_HIGH_QUALITY</codeph> (4) or <codeph>AUDIO_PROFILE_MUSIC_HIGH_QUALITY_STEREO</codeph> (5).</li>
                </ul>
            </p>
            <p props="android">You can call this method to set a preset voice conversion effect for the local user who is publishing the audio stream. Once set, all users in the channel can hear the effect. You can set different voice conversion effects for different scenarios.
To achieve better audio effects, it is recommended to call the following APIs before this method:
                <ul>
                    <li>Call <xref keyref="setAudioScenario"/> to set the audio scenario to high-quality audio, i.e., <codeph>AUDIO_SCENARIO_GAME_STREAMING</codeph> (3).</li>
                    <li>Call <codeph>setAudioProfile</codeph> and set the <codeph>profile</codeph> parameter to <codeph>MUSIC_HIGH_QUALITY</codeph> (4) or <codeph>MUSIC_HIGH_QUALITY_STEREO</codeph> (5).</li>
                </ul>
            </p>
            <note props="cpp">
                <ul>
                    <li>Do not set the <codeph>profile</codeph> parameter in <codeph>setAudioProfile</codeph> to <codeph>AUDIO_PROFILE_SPEECH_STANDARD</codeph> (1) or <codeph>AUDIO_PROFILE_IOT</codeph> (6), or this method will not take effect.</li>
                    <li>This method works best for voice processing and is not recommended for audio that contains music.</li>
                    <li>After calling <xref keyref="setVoiceConversionPreset"/>, do not call the following methods, or the settings will be overridden:
                        <ul>
                            <li><xref keyref="setAudioEffectPreset"/></li>
                            <li><xref keyref="setAudioEffectParameters"/></li>
                            <li><xref keyref="setVoiceBeautifierPreset"/></li>
                            <li><xref keyref="setVoiceBeautifierParameters"/></li>
                            <li><xref keyref="setLocalVoicePitch"/></li>
                            <li><xref keyref="setLocalVoiceFormant"/></li>
                            <li><xref keyref="setLocalVoiceEqualization"/></li>
                            <li><xref keyref="setLocalVoiceReverb"/></li>
                        </ul>
                    </li>
                    <li>This method depends on the voice conversion dynamic library <xref keyref="audiobeauty"/>. If the library is deleted, this feature cannot be enabled properly.</li>
                </ul>
            </note>
            <note props="android">
                <ul>
                    <li>Do not set the <codeph>profile</codeph> parameter in <codeph>setAudioProfile</codeph> to <codeph>SPEECH_STANDARD</codeph> (1), otherwise this method will not take effect.</li>
                    <li>This method works best for voice processing. Agora does not recommend using it for audio data that includes music.</li>
                    <li>After calling <xref keyref="setVoiceConversionPreset"/>, Agora does not recommend calling the following methods, as they will override the effect set by <xref keyref="setVoiceConversionPreset"/>:
                        <ul>
                            <li><xref keyref="setAudioEffectPreset"/></li>
                            <li><xref keyref="setAudioEffectParameters"/></li>
                            <li><xref keyref="setVoiceBeautifierPreset"/></li>
                            <li><xref keyref="setVoiceBeautifierParameters"/></li>
                            <li><xref keyref="setLocalVoicePitch"/></li>
                            <li><xref keyref="setLocalVoiceFormant"/></li>
                            <li><xref keyref="setLocalVoiceEqualization"/></li>
                            <li><xref keyref="setLocalVoiceReverb"/></li>
                        </ul>
                    </li>
                    <li>This method depends on the audio beautifier dynamic library <xref keyref="audiobeauty"/>. If the library is deleted, this feature cannot be enabled.</li>
                </ul>
            </note>
        </section>
        <section id="timing" deliveryTarget="details" props="android cpp">
            <title>Timing</title>
            <p props="cpp">You can call this method before or after joining a channel.</p>
            <p props="android">You can call this method before or after joining a channel.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>preset</pt>
                    <pd>Preset voice conversion effect options. See <xref keyref="VOICE_CONVERSION_PRESET"/>.</pd>
                </plentry>
                <plentry props="android">
                    <pt>preset</pt>
                    <pd>Options for the SDK's preset voice conversion effects:
                        <ul>
                            <li><codeph>VOICE_CONVERSION_OFF</codeph>: Disable voice conversion and use the original voice.</li>
                            <li><codeph>VOICE_CHANGER_NEUTRAL</codeph>: Neutral voice. Recommended for female voices to avoid distortion.</li>
                            <li><codeph>VOICE_CHANGER_SWEET</codeph>: Sweet voice. Recommended for female voices to avoid distortion.</li>
                            <li><codeph>VOICE_CHANGER_SOLID</codeph>: Deep voice. Recommended for male voices to avoid distortion.</li>
                            <li><codeph>VOICE_CHANGER_BASS</codeph>: Bass voice. Recommended for male voices to avoid distortion.</li>
                        </ul>
                    </pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>