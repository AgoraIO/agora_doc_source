<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="callback_irtcengineeventhandler_onfacepositionchanged">
    <title><ph keyref="onFacePositionChanged"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Reports the local user's face detection results.</ph><ph id="shortdesc" props="android">Reports local user's face detection result.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="onFacePositionChanged"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual void onFacePositionChanged(int imageWidth, int imageHeight, const Rectangle* vecRectangle, const int* vecDistance, int numFaces)</codeblock>
                <codeblock props="android" outputclass="language-java">public void onFacePositionChanged(int imageWidth, int imageHeight, AgoraFacePositionInfo[] faceRectArr)</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">After calling <xref keyref="enableFaceDetection"/> to enable face detection, you can get the following information about the local user in real time:
                <ul>
                    <li>Width and height of the local video.</li>
                    <li>Position of the face in the local view.</li>
                    <li>Distance between the face and the screen.</li>
                </ul><ph>This distance is calculated based on the fitting of the local video size and face position.</ph></p>
            <p props="android">After calling <codeph>enableFaceDetection(true)</codeph> to enable face detection, you can get the following information in real time:
                <ul>
                    <li>Width and height of the local video.</li>
                    <li>Position of the face in the local view.</li>
                    <li>Distance between the face and the screen. This value is calculated based on the local video size and face position.</li>
                </ul>
            </p>
            <note props="cpp">
                <ul>
                    <li>This callback is only applicable to Android and iOS platforms.</li>
                    <li>This callback is triggered immediately when the face in front of the camera disappears. When no face is detected, the callback frequency is reduced to save local device power.</li>
                    <li>When the face is close to the screen, the SDK stops triggering this callback.</li>
                    <li>On Android, the distance value reported in this callback may differ from the actual distance. Therefore, Agora does not recommend using it for precise calculations.</li>
                </ul>
            </note>
            <note props="android">
                <ul>
                    <li>This callback is triggered immediately when the face in front of the camera disappears. When no face is detected, to reduce power consumption, the callback frequency is reduced.</li>
                    <li>When the face is close to the screen, the SDK stops triggering this callback.</li>
                    <li>On Android, the reported distance value may differ slightly from the actual distance, so it is not recommended for precise calculations.</li>
                </ul>
            </note>
        </section>
        <section id="timing" deliveryTarget="details" props="cpp">
            <title>Trigger Timing</title>
            <p props="cpp">Triggered when a change in face position is detected.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>imageWidth</pt>
                    <pd>The width (in pixels) of the video image captured by the local camera.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>imageHeight</pt>
                    <pd>The height (in pixels) of the video image captured by the local camera.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>vecRectangle</pt>
                    <pd>An array of length <codeph>numFaces</codeph>, representing detected face information:
                        <ul>
                            <li><codeph>x</codeph>: The x coordinate (in pixels) of the face in the local view, with the top-left corner as the origin, indicating the horizontal position relative to the origin.</li>
                            <li><codeph>y</codeph>: The y coordinate (in pixels) of the face in the local view, with the top-left corner as the origin, indicating the vertical position relative to the origin.</li>
                            <li><codeph>width</codeph>: The width (in pixels) of the face in the capture view.</li>
                            <li><codeph>height</codeph>: The height (in pixels) of the face in the capture view. See <xref keyref="Rectangle"/>.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>vecDistance</pt>
                    <pd>An array of length <codeph>numFaces</codeph>, representing the distance (in centimeters) between each face and the device screen.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>numFaces</pt>
                    <pd>The number of detected faces. A value of 0 indicates no face detected.</pd>
                </plentry>
                <plentry props="android">
                    <pt>imageWidth</pt>
                    <pd>Width of the video image captured by the local camera (in pixels).</pd>
                </plentry>
                <plentry props="android">
                    <pt>imageHeight</pt>
                    <pd>Height of the video image captured by the local camera (in pixels).</pd>
                </plentry>
                <plentry props="android">
                    <pt>faceRectArr</pt>
                    <pd>Detected face information. The array length depends on the number of detected faces and may be 0, indicating no face detected in front of the camera. See <xref keyref="AgoraFacePositionInfo"/>.</pd>
                </plentry>
            </parml>
        </section>
    </refbody>
</reference>