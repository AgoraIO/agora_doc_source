<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_setavsyncsource">
    <title><ph keyref="setAVSyncSource"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Sets audio-video synchronization at the sender side.</ph><ph id="shortdesc" props="android">Sets the audio-video sync source on the publishing end.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="setAVSyncSource"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int setAVSyncSource(const char* channelId, uid_t uid) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int setAVSyncSource(String channelId, int uid);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">Users may use two separate devices to send audio and video streams respectively. To ensure audio-video sync at the receiver side, you can call this method on the video sender and pass in the channel name and user ID of the audio sender. The SDK adjusts the video stream based on the audio stream's timestamp, ensuring sync even if the two devices use different uplink networks (e.g., Wi-Fi and 4G).</p>
            <p props="android">You can call this method on the video publishing device and pass in the channel name and user ID of the audio publishing device. The SDK uses the timestamp of the sent audio stream as a reference to automatically adjust the video stream, ensuring that even if the two publishing devices have different uplink network conditions (e.g., one uses Wi-Fi and the other uses 4G), the audio and video remain synchronized on the receiving end.</p>
            <note props="cpp">Agora recommends calling this method before joining a channel.</note>
            <note props="android">It is recommended to call this method before joining a channel.</note>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>channelId</pt>
                    <pd>Channel name of the audio sender.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>uid</pt>
                    <pd>User ID of the audio sender.</pd>
                </plentry>
                <plentry props="android">
                    <pt>channelId</pt>
                    <pd>Channel name of the audio publishing device.</pd>
                </plentry>
                <plentry props="android">
                    <pt>uid</pt>
                    <pd>User ID of the audio publishing device.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>