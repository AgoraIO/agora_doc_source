<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengineex_enableaudiovolumeindicationex">
    <title><ph keyref="enableAudioVolumeIndicationEx"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Enables the reporting of user volume indications.</ph><ph id="shortdesc" props="android">Enables reporting of user audio volume indications.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="enableAudioVolumeIndicationEx"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int enableAudioVolumeIndicationEx(int interval, int smooth, bool reportVad, const RtcConnection&amp; connection) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int enableAudioVolumeIndicationEx(int interval, int smooth, boolean reportVad, RtcConnection connection);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">This method enables the SDK to periodically report the volume information of the local user who sends the audio stream and up to three remote users with the highest instantaneous volume.</p>
            <p props="android">This method enables the SDK to periodically report the volume information of the local user and up to three remote users with the highest instantaneous volume.</p>
        </section>
        <section id="scenario" deliveryTarget="details">
            <title>Scenario</title>
            <p>This method applies to multi-channel scenarios.</p>
        </section>
        <section id="timing" deliveryTarget="details" props="android cpp">
            <title>Timing</title>
            <p props="cpp">Call this method after calling <xref keyref="joinChannelEx"/>.</p>
            <p props="android">Call this method after calling <xref keyref="joinChannelEx"/>.</p>
        </section>
        <section id="related" deliveryTarget="details" props="android cpp">
            <title>Related Callbacks</title>
            <p props="cpp">After successfully calling this method, the SDK triggers the <xref keyref="onAudioVolumeIndication"/> callback at the specified time interval to report volume information when users publish audio streams in the channel.</p>
            <p props="android">If the method call succeeds and users in the channel publish audio streams, the SDK triggers the <xref keyref="onAudioVolumeIndication"/> callback based on the set interval.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>interval</pt>
                    <pd>Sets the time interval (ms) between two volume indications:
                        <ul>
                            <li>≤ 0: Disables volume indication.</li>
                            <li>&gt; 0: The time interval (ms) between two volume indications. This value must be greater than 10; otherwise, you will not receive the <xref keyref="onAudioVolumeIndication"/> callback. A value greater than 100 is recommended.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>smooth</pt>
                    <pd>Sets the smoothing factor of the volume indication. The range is [0,10], and the recommended value is 3. The larger the value, the more sensitive the indication.</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>reportVad</pt>
                    <pd>Whether to enable voice activity detection (VAD) for the local user:
                        <ul>
                            <li><xref keyref="true"/>: Enable VAD. The <codeph>vad</codeph> parameter in the <xref keyref="onAudioVolumeIndication"/> callback reports the voice activity status of the local user.</li>
                            <li><xref keyref="false"/>: (Default) Disable VAD. The <codeph>vad</codeph> parameter in the <xref keyref="onAudioVolumeIndication"/> callback does not report the voice activity status of the local user unless the engine automatically detects voice activity.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="android">
                    <pt>interval</pt>
                    <pd>The time interval (ms) between volume indications:
                        <ul>
                            <li>≤ 0: Disables the volume indication.</li>
                            <li>&gt; 0: Interval between indications. Must be greater than 10 to receive <xref keyref="onAudioVolumeIndication"/> callbacks. Recommended value: &gt; 100.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>smooth</pt>
                    <pd>The smoothing factor for sensitivity. Range: [0, 10]. Recommended: 3. Higher values make indications more sensitive.</pd>
                </plentry>
                <plentry props="android">
                    <pt>reportVad</pt>
                    <pd>Whether to enable voice activity detection (VAD) for the local user:
                        <ul>
                            <li><xref keyref="true"/>: Enables VAD. The <codeph>vad</codeph> parameter in the <xref keyref="onAudioVolumeIndication"/> callback reports the local user's voice activity.</li>
                            <li><xref keyref="false"/>: (Default) Disables VAD. The <codeph>vad</codeph> parameter does not report local voice activity unless automatically detected by the engine.</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>