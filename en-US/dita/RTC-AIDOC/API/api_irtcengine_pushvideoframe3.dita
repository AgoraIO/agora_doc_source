<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_pushvideoframe3">
    <title><ph keyref="pushVideoFrame3"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="android">Pushes external raw video frame to the SDK via video track.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="pushVideoFrame3"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="android" outputclass="language-java">public abstract int pushExternalVideoFrameById(AgoraVideoFrame frame, int videoTrackId);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="android">To publish a custom video source, follow these steps:
                <ol>
                    <li>Call <xref keyref="createCustomVideoTrack"/> to create a video track and get the video track ID.</li>
                    <li>Call <codeph>joinChannel</codeph> to join the channel. In <xref keyref="ChannelMediaOptions"/>, set <codeph>customVideoTrackId</codeph> to the video track ID and set <codeph>publishCustomVideoTrack</codeph> to <xref keyref="true"/>.</li>
                    <li>Call <codeph>pushExternalVideoFrameById</codeph> and set <codeph>videoTrackId</codeph> to the ID from step 2 to publish the corresponding custom video source in the channel.</li>
                </ol><ph>You can push video frames by calling <codeph>pushExternalVideoFrameById</codeph> or <codeph>pushExternalVideoFrame</codeph>. The difference is that <codeph>pushExternalVideoFrameById</codeph> does not support Texture format video data.</ph></p>
            <note props="android">If you only need to push one custom video source to the channel, you can directly call <xref keyref="setExternalVideoSource"/>, and the SDK will automatically create a video track with <codeph>videoTrackId</codeph> 0.
Warning: After calling <codeph>pushExternalVideoFrameById</codeph>, even if you stop pushing external video frames to the SDK, the custom video stream will still be counted toward video duration and incur charges. Agora recommends taking appropriate actions based on your use case to avoid such charges:
                <ul>
                    <li>If you no longer need to capture external video, call <xref keyref="destroyCustomVideoTrack"/> to destroy the custom video track.</li>
                    <li>If you only want to use external video for local preview and not publish it to the channel, call <xref keyref="muteLocalVideoStream"/> to stop sending the video stream, or call <xref keyref="updateChannelMediaOptions"/> and set <codeph>publishCustomVideoTrack</codeph> to <xref keyref="false"/>.</li>
                </ul>
            </note>
        </section>
        <section id="parameters" deliveryTarget="details" props="android">
            <title>Parameters</title>
            <parml>
                <plentry props="android">
                    <pt>frame</pt>
                    <pd>The external raw video frame to be pushed. See <xref keyref="ExternalVideoFrame"/>.</pd>
                </plentry>
                <plentry props="android">
                    <pt>videoTrackId</pt>
                    <pd>The video track ID returned by <xref keyref="createCustomVideoTrack"/>.
                        <note>If you only need to push one custom video source, set <codeph>videoTrackId</codeph> to 0.</note>
                    </pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android">
            <title>Return Values</title>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>