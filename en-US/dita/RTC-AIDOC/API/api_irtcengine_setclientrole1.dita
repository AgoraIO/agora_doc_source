<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_setclientrole1">
    <title><ph keyref="setClientRole1"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Sets the user role.</ph><ph id="shortdesc" props="android">Sets the user role of the client instance.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="setClientRole1"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int setClientRole(CLIENT_ROLE_TYPE role) = 0;</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract int setClientRole(int role);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">
                <ul>
                    <li>By default, the SDK sets the user role to audience. You can call this method to set the user role to broadcaster. The user role (<codeph>role</codeph>) determines the user's permission at the SDK level, including whether they can publish audio and video streams in the channel.</li>
                </ul>
                <ul>
                    <li>If you call this method before joining a channel to set the user role to broadcaster and set local video properties via <xref keyref="setupLocalVideo"/>, the local video preview is automatically enabled when the user joins the channel.</li>
                </ul>
                <ul>
                    <li>If you call this method after joining a channel to set the user role, the SDK automatically calls <xref keyref="muteLocalAudioStream"/> and <xref keyref="muteLocalVideoStream"/> to update the publishing status of audio and video streams.</li>
                </ul>
            </p>
            <p props="android">You can call this method to set the user role as either broadcaster or audience. The user role determines the user's privileges at the SDK level, including whether the user can publish audio and video streams in the channel.
You can call this method either before or after joining a channel:
                <ul>
                    <li>If you call this method before joining a channel and set the role as broadcaster, and also call <xref keyref="setupLocalVideo"/> to configure local video, the local video preview starts automatically when the user joins the channel.</li>
                    <li>If you call this method after joining a channel, the SDK automatically calls <xref keyref="muteLocalAudioStream"/> and <xref keyref="muteLocalVideoStream"/> to change the publishing state of audio and video streams.</li>
                </ul>
            </p>
            <note props="cpp">When calling this method before joining a channel and setting the user role to <codeph>BROADCASTER</codeph>, the local client does not trigger the <xref keyref="onClientRoleChanged"/> callback; but if <codeph>role</codeph> is set to <codeph>AUDIENCE</codeph>, the callback is triggered.</note>
            <note props="android">If you call this method before joining a channel and set the role to <codeph>CLIENT_ROLE_BROADCASTER</codeph>, the local client does not trigger the <xref keyref="onClientRoleChanged"/> callback. However, if you set the role to <codeph>CLIENT_ROLE_AUDIENCE</codeph>, the callback is triggered.</note>
        </section>
        <section id="timing" deliveryTarget="details" props="android cpp">
            <title>Timing</title>
            <p props="cpp">You can call this method before or after joining a channel.</p>
            <p props="android">You can call this method before or after joining a channel.</p>
        </section>
        <section id="related" deliveryTarget="details" props="android cpp">
            <title>Related Callbacks</title>
            <p props="cpp">If you call this method to switch the user role after joining a channel, the SDK triggers the following callbacks:
                <ul>
                    <li>Local client: Triggers the <xref keyref="onClientRoleChanged"/> callback. Note: Calling this method before joining a channel and setting <codeph>role</codeph> to <codeph>AUDIENCE</codeph> also triggers this callback.</li>
                    <li>Remote client: Triggers the <xref keyref="onUserJoined"/> or <xref keyref="onUserOffline"/> callback.</li>
                </ul><ph>If you call this method after joining a channel and fail to set the user role, the SDK triggers the <xref keyref="onClientRoleChangeFailed"/> callback to report the failure reason and current user role.</ph></p>
            <p props="android">If you call this method to switch the user role after joining a channel, the SDK triggers the following callbacks:
                <ul>
                    <li>The local client: <xref keyref="onClientRoleChanged"/> callback.</li>
                    <li>Remote clients: <xref keyref="onUserJoined"/> or <xref keyref="onUserOffline"/> callback.</li>
                </ul><ph>If the method call fails after joining a channel, the SDK triggers the <xref keyref="onClientRoleChangeFailed"/> callback, reporting the failure reason and current role.</ph></p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>role</pt>
                    <pd>User role. See <xref keyref="CLIENT_ROLE_TYPE"/>.
                        <note>If you set the user role to audience, you cannot publish audio and video streams in the channel. To publish media streams during a live broadcast, make sure to set the user role to broadcaster.</note>
                    </pd>
                </plentry>
                <plentry props="android">
                    <pt>role</pt>
                    <pd>
                        <note>If you set the user role to audience, you cannot publish audio or video streams in the channel.</note><ph>User role:</ph>
                        <ul>
                            <li><codeph>CLIENT_ROLE_BROADCASTER</codeph> (1): Broadcaster.</li>
                            <li><codeph>CLIENT_ROLE_AUDIENCE</codeph> (2): Audience.</li>
                        </ul>
                    </pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.
                        <ul>
                            <li>-1: A general error occurred (no specific reason).</li>
                            <li>-2: Invalid parameter.</li>
                            <li>-7: SDK not initialized.</li>
                        </ul>
                    </li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.
                        <ul>
                            <li>-1: A general error occurred (no specific reason).</li>
                            <li>-2: Invalid parameter.</li>
                            <li>-7: SDK not initialized.</li>
                        </ul>
                    </li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>