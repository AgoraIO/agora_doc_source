<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_iaudiodevicemanager_setloopbackdevice">
    <title><ph keyref="setLoopbackDevice"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">Sets the SDK's loopback capture device.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="setLoopbackDevice"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int setLoopbackDevice(const char deviceId[MAX_DEVICE_ID_LENGTH]) = 0;</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">By default, the SDK uses the current playback device as the loopback capture device. If you want to specify another audio device as the loopback capture device, you can call this method and set <codeph>deviceId</codeph> to the target device. You can use this method to change the current audio routing without changing the default audio routing. For example, if the default audio routing is the microphone, and you call this method to set the audio routing to the loopback device and start device testing before joining a channel, the SDK will perform the test on the loopback device. After the test is complete and you join the channel, the SDK will still use the microphone for audio capture.</p>
            <note props="cpp">This method is for Windows and macOS only.</note>
        </section>
        <section id="scenario" deliveryTarget="details">
            <title>Scenario</title>
            <p>Typical scenarios for using this method include:
App A plays music via Bluetooth headset while App B makes a video call and plays audio through the speaker:
                <ul>
                    <li>If the loopback capture device is set to the Bluetooth headset, the SDK will publish the music played by App A to the remote end.</li>
                    <li>If the loopback capture device is set to the speaker, the SDK will not publish the music played by App A to the remote end.</li>
                    <li>If the loopback capture device is first set to the Bluetooth headset, and then App A switches to a wired headset for music playback, you need to call this method again to set the loopback capture device to the wired headset so that the SDK continues to publish the music to the remote end.</li>
                </ul>
            </p>
        </section>
        <section id="parameters" deliveryTarget="details" props="cpp">
            <title>Parameters</title>
            <parml>
                <plentry props="cpp">
                    <pt>deviceId</pt>
                    <pd>Specifies the SDK's loopback capture device. You can get the device ID by calling <xref keyref="enumeratePlaybackDevices"/>. The maximum length is <xref keyref="MAX_DEVICE_ID_LENGTH_TYPE"/>.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="cpp">
            <title>Return Values</title>
            <p props="cpp">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>