<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengineex_preloadeffectex">
    <title><ph keyref="preloadEffectEx"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="electron">Preloads the specified sound effect into the channel.</ph><ph id="shortdesc" props="rn">Preloads the specified sound effect into the channel.</ph><ph id="shortdesc" props="flutter">Preloads the specified audio effect into the channel.</ph><ph id="shortdesc" props="unity">Preloads the specified sound effect into the channel.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="preloadEffectEx"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="electron" outputclass="language-typescript">abstract preloadEffectEx(
    connection: RtcConnection,
    soundId: number,
    filePath: string,
    startPos?: number
  ): number;</codeblock>
                <codeblock props="rn" outputclass="language-typescript">abstract preloadEffectEx(
    connection: RtcConnection,
    soundId: number,
    filePath: string,
    startPos?: number
  ): number;</codeblock>
                <codeblock props="flutter" outputclass="language-dart">Future&lt;void&gt; preloadEffectEx(
      {required RtcConnection connection,
      required int soundId,
      required String filePath,
      int startPos = 0});</codeblock>
                <codeblock props="unity" outputclass="language-csharp">public abstract int PreloadEffectEx(RtcConnection connection, int soundId, string filePath, int startPos = 0);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <dl outputclass="since">
                <dlentry props="electron">
                    <dt>Since</dt>
                    <dd>Available since v4.6.2.</dd>
                </dlentry>
                <dlentry props="rn">
                    <dt>Since</dt>
                    <dd>Available since v4.6.2.</dd>
                </dlentry>
                <dlentry props="flutter">
                    <dt>Since</dt>
                    <dd>Available since v4.6.2.</dd>
                </dlentry>
                <dlentry props="unity">
                    <dt>Since</dt>
                    <dd>Available since v4.6.2.</dd>
                </dlentry>
            </dl>
            <p props="electron">Each time you call this method, only one sound effect file can be preloaded into memory. To preload multiple sound effects, call this method multiple times. After preloading, you can call <xref keyref="playEffect3"/> to play the preloaded sound effect, or <xref keyref="playAllEffects"/> to play all preloaded sound effects.</p>
            <p props="rn">Each time you call this method, only one sound effect file can be preloaded into memory. To preload multiple sound effect files, call this method multiple times. After preloading, you can call <xref keyref="playEffect3"/> to play the preloaded sound effect, or call <xref keyref="playAllEffects"/> to play all preloaded sound effects.</p>
            <p props="flutter">Each time you call this method, only one audio effect file can be preloaded into memory. To preload multiple audio effect files, call this method multiple times. After preloading, you can call <xref keyref="playEffect3"/> to play the preloaded audio effect, or call <xref keyref="playAllEffects"/> to play all preloaded audio effects.</p>
            <p props="unity">Each time you call this method, only one sound effect file can be preloaded into memory. To preload multiple sound effect files, call this method multiple times. After preloading, you can call <codeph>playEffect</codeph> to play the preloaded sound effect, or call <codeph>playAllEffects</codeph> to play all preloaded sound effects.</p>
            <note props="electron">
                <ul>
                    <li>To ensure smooth user experience, the size of the sound effect file should not exceed the limit.</li>
                    <li>Agora recommends calling this method before joining a channel.</li>
                    <li>If you call <xref keyref="preloadEffectEx"/> before <xref keyref="playEffectEx"/>, the file resource will not be closed after <xref keyref="playEffectEx"/> is executed. The next call to <xref keyref="playEffectEx"/> will start playback from the beginning.</li>
                    <li>If you do not call <xref keyref="preloadEffectEx"/> before <xref keyref="playEffectEx"/>, the file resource will be destroyed after <xref keyref="playEffectEx"/> is executed. The next call to <xref keyref="playEffectEx"/> will attempt to reopen the file and play from the beginning.</li>
                </ul>
            </note>
            <note props="rn">
                <ul>
                    <li>To ensure a smooth experience, the size of the sound effect file should not exceed the limit.</li>
                    <li>Agora recommends calling this method before joining a channel.</li>
                    <li>If <xref keyref="preloadEffectEx"/> is called before <xref keyref="playEffectEx"/>, then after <xref keyref="playEffectEx"/> is executed, the file resource is not released. The next <xref keyref="playEffectEx"/> call will start playback from the beginning.</li>
                    <li>If <xref keyref="preloadEffectEx"/> is not called before <xref keyref="playEffectEx"/>, then after <xref keyref="playEffectEx"/> is executed, the resource is destroyed. The next <xref keyref="playEffectEx"/> call will attempt to reopen the file and play from the beginning.</li>
                </ul>
            </note>
            <note props="flutter">
                <ul>
                    <li>To ensure smooth usage, the size of the audio effect file should not exceed the limit.</li>
                    <li>Agora recommends calling this method before joining the channel.</li>
                    <li>If you call <xref keyref="preloadEffectEx"/> before <xref keyref="playEffectEx"/>, the file resource is not released after <xref keyref="playEffectEx"/> is executed. The next time you call <xref keyref="playEffectEx"/>, it will start playing from the beginning.</li>
                    <li>If you do not call <xref keyref="preloadEffectEx"/> before <xref keyref="playEffectEx"/>, the resource is destroyed after <xref keyref="playEffectEx"/> is executed. The next time you call <xref keyref="playEffectEx"/>, it will attempt to reopen the file and play from the beginning.</li>
                </ul>
            </note>
            <note props="unity">
                <ul>
                    <li>To ensure a smooth experience, the size of the sound effect file should not exceed the limit.</li>
                    <li>Agora recommends calling this method before joining a channel.</li>
                    <li>If you call <codeph>preloadEffectEx</codeph> before calling <codeph>playEffectEx</codeph>, then <codeph>playEffectEx</codeph> will not release the file resource after execution. The next time you call <codeph>playEffectEx</codeph>, it will start playing from the beginning.</li>
                    <li>If you do not call <codeph>preloadEffectEx</codeph> before calling <codeph>playEffectEx</codeph>, then <codeph>playEffectEx</codeph> will destroy the resource after execution. The next time you call <codeph>playEffectEx</codeph>, it will attempt to reopen the file and start playing from the beginning.</li>
                </ul>
            </note>
        </section>
        <section id="scenario" deliveryTarget="details">
            <title>Scenario</title>
            <p>This method applies to multi-channel scenarios.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="electron flutter rn unity">
            <title>Parameters</title>
            <parml>
                <plentry props="electron">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="electron">
                    <pt>soundId</pt>
                    <pd>Sound effect ID.</pd>
                </plentry>
                <plentry props="electron">
                    <pt>filePath</pt>
                    <pd>Absolute path of the local file or URL of the online file. Supported audio formats include: mp3, mp4, m4a, aac, 3gp, mkv, and wav.</pd>
                </plentry>
                <plentry props="electron">
                    <pt>startPos</pt>
                    <pd>Start position (in milliseconds) for playing the sound effect file.</pd>
                </plentry>
                <plentry props="rn">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="rn">
                    <pt>soundId</pt>
                    <pd>Sound effect ID.</pd>
                </plentry>
                <plentry props="rn">
                    <pt>filePath</pt>
                    <pd>Absolute path of the local file or URL of the online file. Supported audio formats include: mp3, mp4, m4a, aac, 3gp, mkv, and wav.</pd>
                </plentry>
                <plentry props="rn">
                    <pt>startPos</pt>
                    <pd>Start position for playing the sound effect file (in milliseconds).</pd>
                </plentry>
                <plentry props="flutter">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="flutter">
                    <pt>soundId</pt>
                    <pd>Audio effect ID.</pd>
                </plentry>
                <plentry props="flutter">
                    <pt>filePath</pt>
                    <pd>The absolute path of a local file or the URL of an online file. Supported audio formats include: mp3, mp4, m4a, aac, 3gp, mkv, and wav.</pd>
                </plentry>
                <plentry props="flutter">
                    <pt>startPos</pt>
                    <pd>The start position for playing the audio effect file, in milliseconds.</pd>
                </plentry>
                <plentry props="unity">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="unity">
                    <pt>soundId</pt>
                    <pd>Sound effect ID.</pd>
                </plentry>
                <plentry props="unity">
                    <pt>filePath</pt>
                    <pd>The absolute path of the local file or the URL of the online file. Supported audio formats include: mp3, mp4, m4a, aac, 3gp, mkv, and wav.</pd>
                </plentry>
                <plentry props="unity">
                    <pt>startPos</pt>
                    <pd>The start position for playing the sound effect file, in milliseconds.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="electron flutter rn unity">
            <title>Return Values</title>
            <p props="electron">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="rn">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="flutter">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
            <p props="unity">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure.</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>