<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_setcloudproxy">
    <title><ph keyref="setCloudProxy"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="electron">Sets the cloud proxy service.</ph><ph id="shortdesc" props="rn">Sets the cloud proxy service.</ph><ph id="shortdesc" props="flutter">Sets the cloud proxy service.</ph><ph id="shortdesc" props="unity">Sets the cloud proxy service.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="setCloudProxy"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="electron" outputclass="language-typescript">abstract setCloudProxy(proxyType: CloudProxyType): number;</codeblock>
                <codeblock props="rn" outputclass="language-typescript">abstract setCloudProxy(proxyType: CloudProxyType): number;</codeblock>
                <codeblock props="flutter" outputclass="language-dart">Future&lt;void&gt; setCloudProxy(CloudProxyType proxyType);</codeblock>
                <codeblock props="unity" outputclass="language-csharp">public abstract int SetCloudProxy(CLOUD_PROXY_TYPE proxyType);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="electron">When a user's network access is restricted by a firewall, you need to add the IP addresses and port numbers provided by Agora to the firewall whitelist, then call this method to enable the cloud proxy and set the proxy type using the <codeph>proxyType</codeph> parameter.
Once successfully connected to the cloud proxy, the SDK triggers the <xref keyref="onConnectionStateChanged"/> (ConnectionStateConnecting, ConnectionChangedSettingProxyServer) callback.
To disable an already set Force UDP or Force TCP cloud proxy, call <codeph>setCloudProxy(NoneProxy)</codeph>.
To change the current cloud proxy type, first call <codeph>setCloudProxy(NoneProxy)</codeph>, then call <xref keyref="setCloudProxy"/> again with the desired <codeph>proxyType</codeph> value.</p>
            <p props="rn">When a user's network is restricted by a firewall, you need to add the IP addresses and port numbers provided by Agora to the firewall whitelist, then call this method to enable the cloud proxy and set the proxy type via the <codeph>proxyType</codeph> parameter.
After successfully connecting to the cloud proxy, the SDK triggers the <xref keyref="onConnectionStateChanged"/> (ConnectionStateConnecting, ConnectionChangedSettingProxyServer) callback.
To disable a configured Force UDP or Force TCP cloud proxy, call <codeph>setCloudProxy(NoneProxy)</codeph>.
To change the configured cloud proxy type, first call <codeph>setCloudProxy(NoneProxy)</codeph>, then call <xref keyref="setCloudProxy"/> again with the desired <codeph>proxyType</codeph>.</p>
            <p props="flutter">When the user's network is restricted by a firewall, you need to add the IP and port provided by Agora to the firewall whitelist, then call this method to enable the cloud proxy and set the proxy type via the <codeph>proxyType</codeph> parameter.
After successfully connecting to the cloud proxy, the SDK triggers the <xref keyref="onConnectionStateChanged"/> (connectionStateConnecting, connectionChangedSettingProxyServer) callback.
To disable an already set Force UDP or Force TCP cloud proxy, call <codeph>setCloudProxy(noneProxy)</codeph>.
To change the cloud proxy type, first call <codeph>setCloudProxy(noneProxy)</codeph>, then call <xref keyref="setCloudProxy"/> with the desired <codeph>proxyType</codeph> value.</p>
            <p props="unity">When the user's network access is restricted by a firewall, you need to add the IP and port numbers provided by Agora to the firewall whitelist, then call this method to enable the cloud proxy and set the proxy type via the <codeph>proxyType</codeph> parameter.
After successfully connecting to the cloud proxy, the SDK triggers the <xref keyref="onConnectionStateChanged"/> (CONNECTION_STATE_CONNECTING, CONNECTION_CHANGED_SETTING_PROXY_SERVER) callback.
If you want to disable the currently set Force UDP or Force TCP cloud proxy, call <codeph>SetCloudProxy(NONE_PROXY)</codeph>.
If you want to change the currently set cloud proxy type, call <codeph>SetCloudProxy(NONE_PROXY)</codeph> first, then call <xref keyref="setCloudProxy"/> again and pass in your desired <codeph>proxyType</codeph> value.</p>
            <note props="electron">
                <ul>
                    <li>It is recommended to call this method outside the channel.</li>
                    <li>When a user is behind an intranet firewall, the features of CDN live streaming and cross-channel media relay are not available when using Force UDP cloud proxy.</li>
                    <li>When using Force UDP cloud proxy, the <xref keyref="startAudioMixing2"/> method cannot play online audio files over HTTP. CDN live streaming and cross-channel media relay use TCP-based cloud proxy.</li>
                </ul>
            </note>
            <note props="rn">
                <ul>
                    <li>It is recommended to call this method outside the channel.</li>
                    <li>If the user is in an intranet firewall environment, the features of CDN live streaming and cross-channel media relay are not available when using Force UDP cloud proxy.</li>
                    <li>When using Force UDP cloud proxy, online audio files using HTTP protocol cannot be played via <xref keyref="startAudioMixing2"/>. CDN live streaming and cross-channel media relay use TCP cloud proxy.</li>
                </ul>
            </note>
            <note props="flutter">
                <ul>
                    <li>It is recommended to call this method outside the channel.</li>
                    <li>If the user is in an intranet firewall environment, the features of CDN streaming and cross-channel media relay are not available when using Force UDP cloud proxy.</li>
                    <li>When using Force UDP cloud proxy, the <xref keyref="startAudioMixing2"/> method cannot play online audio files via HTTP. CDN streaming and cross-channel media relay use cloud proxy over TCP.</li>
                </ul>
            </note>
            <note props="unity">
                <ul>
                    <li>It is recommended to call this method outside the channel.</li>
                    <li>If the user is in a network environment with an internal firewall, the features of CDN live streaming and media stream relay across channels are not available when using the Force UDP cloud proxy.</li>
                    <li>When using the Force UDP cloud proxy, the <xref keyref="startAudioMixing2"/> method cannot play online audio files over HTTP. The features of CDN live streaming and media stream relay across channels use the TCP cloud proxy.</li>
                </ul>
            </note>
        </section>
        <section id="parameters" deliveryTarget="details" props="electron flutter rn unity">
            <title>Parameters</title>
            <parml>
                <plentry props="electron">
                    <pt>proxyType</pt>
                    <pd>The cloud proxy type. See <xref keyref="CLOUD_PROXY_TYPE"/>.
This parameter is required. If not set, the SDK will return an error.</pd>
                </plentry>
                <plentry props="rn">
                    <pt>proxyType</pt>
                    <pd>Cloud proxy type. See <xref keyref="CLOUD_PROXY_TYPE"/>.
This parameter is required. If not set, the SDK returns an error.</pd>
                </plentry>
                <plentry props="flutter">
                    <pt>proxyType</pt>
                    <pd>The cloud proxy type. See <xref keyref="CLOUD_PROXY_TYPE"/>.
This parameter is required. If you do not assign a value, the SDK will report an error.</pd>
                </plentry>
                <plentry props="unity">
                    <pt>proxyType</pt>
                    <pd>Cloud proxy type. See <xref keyref="CLOUD_PROXY_TYPE"/>.
This parameter is required. If you do not assign a value, the SDK will report an error.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="electron flutter rn unity">
            <title>Return Values</title>
            <p props="electron">
                <ul>
                    <li>0: The method call succeeds.</li>
                    <li>&lt; 0: The method call fails. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and troubleshooting.
                        <ul>
                            <li>-2: Invalid parameter.</li>
                            <li>-7: The SDK is not initialized.</li>
                        </ul>
                    </li>
                </ul>
            </p>
            <p props="rn">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and troubleshooting.
                        <ul>
                            <li>-2: Invalid parameter.</li>
                            <li>-7: SDK not initialized.</li>
                        </ul>
                    </li>
                </ul>
            </p>
            <p props="flutter">When the method call succeeds, there is no return value; when fails, the <xref keyref="AgoraRtcException"/> exception is thrown. You need to catch the exception and handle it accordingly. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and resolution suggestions.</p>
            <p props="unity">
                <ul>
                    <li>0: Success.</li>
                    <li>&lt; 0: Failure. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and resolution suggestions.
                        <ul>
                            <li>-2: Invalid parameter.</li>
                            <li>-7: SDK not initialized.</li>
                        </ul>
                    </li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>