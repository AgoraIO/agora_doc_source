<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_irtcengine_preloadchannel">
    <title><ph keyref="preloadChannel"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="electron">Preloads a channel using <codeph>token</codeph>, <codeph>channelId</codeph>, and <codeph>uid</codeph>.</ph><ph id="shortdesc" props="rn">Preloads a channel using <codeph>token</codeph>, <codeph>channelId</codeph>, and <codeph>uid</codeph>.</ph><ph id="shortdesc" props="flutter">Preloads a channel using <codeph>token</codeph>, <codeph>channelId</codeph>, and <codeph>uid</codeph>.</ph><ph id="shortdesc" props="unity">Preloads a channel using <codeph>token</codeph>, <codeph>channelId</codeph>, and <codeph>uid</codeph>.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="preloadChannel"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="electron" outputclass="language-typescript">abstract preloadChannel(
    token: string,
    channelId: string,
    uid: number
  ): number;</codeblock>
                <codeblock props="rn" outputclass="language-typescript">abstract preloadChannel(
    token: string,
    channelId: string,
    uid: number
  ): number;</codeblock>
                <codeblock props="flutter" outputclass="language-dart">Future&lt;void&gt; preloadChannel(
      {required String token, required String channelId, required int uid});</codeblock>
                <codeblock props="unity" outputclass="language-csharp">public abstract int PreloadChannel(string token, string channelId, uint uid);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="electron">Calling this method can reduce the time it takes for an audience member to join a channel when frequently switching channels, thereby shortening the delay before they hear the host's first audio frame and see the first video frame, improving the video experience on the audience side.
If the channel has already been successfully preloaded, and the audience leaves and rejoins the channel, as long as the Token passed during preloading is still valid, re-preloading is not required.</p>
            <p props="rn">Calling this method reduces the time it takes for a viewer to join a channel when frequently switching channels, thereby shortening the time to hear the host's first audio frame and see the first video frame, improving the viewer's video experience.
If the channel has already been preloaded successfully, and the viewer leaves and rejoins the channel, as long as the Token used during preload is still valid, there is no need to preload again.</p>
            <p props="flutter">Calling this method reduces the time it takes for an audience member to join a channel when switching channels frequently, thereby shortening the time to hear the first audio frame and see the first video frame from the host, and improving the audience's video experience.
If the current channel has already been successfully preloaded, and the audience leaves and rejoins the channel, as long as the Token passed during preloading is still valid, re-preloading is not required.</p>
            <p props="unity">Calling this method can reduce the time it takes for a viewer to join a channel when frequently switching channels, thereby shortening the time to hear the first frame of audio or see the first frame of video from the host and improving the viewer's video experience.
If the channel has already been successfully preloaded, and the viewer leaves and rejoins the same channel, as long as the Token used during preloading is still valid, preloading does not need to be performed again.</p>
            <note props="electron">Preloading failure does not affect subsequent normal channel joining, nor does it increase the time to join the channel.
                <ul>
                    <li>When calling this method, ensure the user role is set to audience and the audio scenario is not set to <codeph>AudioScenarioChorus</codeph>; otherwise, preloading will not take effect.</li>
                    <li>Ensure that the channel name, user ID, and Token passed during preloading are the same as those used when joining the channel; otherwise, preloading will not take effect.</li>
                    <li>Currently, one <xref keyref="IRtcEngine"/> instance supports preloading up to 20 channels. If this limit is exceeded, only the latest 20 preloaded channels will take effect.</li>
                </ul>
            </note>
            <note props="rn">If preload fails, it does not affect normal channel joining or increase the join time.
                <ul>
                    <li>When calling this method, ensure the user role is set to audience and the audio scenario is not <codeph>AudioScenarioChorus</codeph>, otherwise preload will not take effect.</li>
                    <li>Ensure the channel name, user ID, and Token passed during preload match those used when joining the channel, otherwise preload will not take effect.</li>
                    <li>A single <xref keyref="IRtcEngine"/> instance supports up to 20 preloaded channels. If exceeded, only the latest 20 preloaded channels are effective.</li>
                </ul>
            </note>
            <note props="flutter">Preloading failure does not affect normal channel joining later, nor does it increase the time to join the channel.
                <ul>
                    <li>When calling this method, ensure the user role is set to audience and the audio scenario is not chorus (<codeph>audioScenarioChorus</codeph>), otherwise preloading will not take effect.</li>
                    <li>Ensure the channel name, user ID, and Token passed during preloading are the same as those used when joining the channel later; otherwise, preloading will not take effect.</li>
                    <li>Currently, a single <xref keyref="IRtcEngine"/> instance supports preloading up to 20 channels. If this limit is exceeded, only the latest 20 preloaded channels take effect.</li>
                </ul>
            </note>
            <note props="unity">If preloading fails, it does not affect the subsequent normal channel join process, nor does it increase the time to join the channel.
                <ul>
                    <li>When calling this method, make sure the user role is set to audience and the audio scenario is not set to chorus (<codeph>AUDIO_SCENARIO_CHORUS</codeph>), otherwise preloading will not take effect.</li>
                    <li>Ensure that the channel name, user ID, and Token passed in during preloading are the same as those used when joining the channel later, otherwise preloading will not take effect.</li>
                    <li>Currently, one <xref keyref="IRtcEngine"/> instance supports preloading up to 20 channels. If this limit is exceeded, only the most recently preloaded 20 channels take effect.</li>
                </ul>
            </note>
        </section>
        <section id="timing" deliveryTarget="details" props="electron flutter rn unity">
            <title>Timing</title>
            <p props="electron">To improve the user experience of channel preloading, Agora recommends calling this method as early as possible after confirming the channel name and user information, and before joining the channel.</p>
            <p props="rn">To improve the user experience of preloading channels, Agora recommends calling this method as early as possible after confirming the channel name and user information, and before joining the channel.</p>
            <p props="flutter">To improve the user experience of preloading channels, Agora recommends calling this method as early as possible after confirming the channel name and user information, and before joining the channel.</p>
            <p props="unity">To enhance the user experience of preloading channels, Agora recommends calling this method as early as possible after confirming the channel name and user information and before joining the channel.</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="electron flutter rn unity">
            <title>Parameters</title>
            <parml>
                <plentry props="electron">
                    <pt>token</pt>
                    <pd>The dynamic key generated on the server for authentication. See [Token Authentication](https://doc.shengwang.cn/doc/rtc/electron/basic-features/token-authentication).
When the token expires, depending on the number of preloaded channels, you can pass a new token for preloading in different ways:
                        <ul>
                            <li>To preload one channel: call this method to pass the new token.</li>
                            <li>To preload multiple channels:
                                <ul>
                                    <li>If you use a wildcard token, call <xref keyref="updatePreloadChannelToken"/> to update the token for all preloaded channels. When generating a wildcard token, the user ID must not be set to 0. See [Using Wildcard Tokens](https://doc.shengwang.cn/doc/rtc/electron/best-practice/wildcard-token).</li>
                                    <li>If you use different tokens: call this method and pass your user ID, corresponding channel name, and the updated token.</li>
                                </ul>
                            </li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="electron">
                    <pt>channelId</pt>
                    <pd>The name of the channel to preload. This parameter identifies the channel for real-time audio and video interaction. Under the same App ID, users who enter the same channel name will join the same channel for audio and video interaction.
This parameter is a string with a maximum length of 64 bytes. The following character set is supported (a total of 89 characters):
                        <ul>
                            <li>26 lowercase English letters a~z</li>
                            <li>26 uppercase English letters A~Z</li>
                            <li>10 digits 0~9</li>
                            <li>"!", "#", "$", "%", "&amp;", "(", ")", "+", "-", ":", ";", "&lt;", "=", ".", "&gt;", "?", "@", "[", "]", "^", "_", "{", "}", "|", "~", ","</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="electron">
                    <pt>uid</pt>
                    <pd>User ID. This parameter identifies the user in the real-time audio and video interaction channel. You must set and manage the user ID yourself and ensure that each user ID is unique within the same channel. This parameter is a 32-bit unsigned integer. Recommended range: 1 to 2^32-1. If not specified (i.e., set to 0), the SDK will automatically assign one and return it in the <xref keyref="onJoinChannelSuccess"/> callback. The application must remember and manage this return value, as the SDK does not maintain it.</pd>
                </plentry>
                <plentry props="rn">
                    <pt>token</pt>
                    <pd>A dynamic key generated on your server for authentication. See [Token Authentication](https://doc.shengwang.cn/doc/rtc/rn/basic-features/token-authentication).
When the Token expires, depending on the number of preloaded channels, you can provide a new Token in different ways:
                        <ul>
                            <li>For one preloaded channel: call this method again with the new Token.</li>
                            <li>For multiple preloaded channels:
                                <ul>
                                    <li>If using a wildcard Token, call <xref keyref="updatePreloadChannelToken"/> to update the Token for all preloaded channels. When generating a wildcard Token, the user ID must not be 0. See [Using Wildcard Token](https://doc.shengwang.cn/doc/rtc/rn/best-practice/wildcard-token).</li>
                                    <li>If using different Tokens: call this method with the user ID, channel name, and the updated Token.</li>
                                </ul>
                            </li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="rn">
                    <pt>channelId</pt>
                    <pd>The name of the channel to preload. This parameter identifies the channel for real-time audio and video interaction. Users with the same App ID and channel name join the same channel.
This parameter must be a string no longer than 64 bytes. Supported character set (89 characters total):
                        <ul>
                            <li>26 lowercase letters a~z</li>
                            <li>26 uppercase letters A~Z</li>
                            <li>10 digits 0~9</li>
                            <li>"!" "#" "$" "%" "&amp;" "(" ")" "+" "-" ":" ";" "&lt;" "=" "." "&gt;" "?" "@" "[" "]" "^" "_" "{" "}" "|" "~" ","</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="rn">
                    <pt>uid</pt>
                    <pd>User ID. This parameter identifies the user in the real-time audio and video channel. You must set and manage the user ID yourself and ensure uniqueness within the channel. This parameter is a 32-bit unsigned integer. Recommended range: 1 to 2^32-1. If not specified (i.e., set to 0), the SDK automatically assigns one and returns it in the <xref keyref="onJoinChannelSuccess"/> callback. The application must store and manage this value; the SDK does not manage it.</pd>
                </plentry>
                <plentry props="flutter">
                    <pt>token</pt>
                    <pd>A dynamic key generated on your server for authentication. See [Token Authentication](https://doc.shengwang.cn/doc/rtc/flutter/basic-features/token-authentication).
When the Token expires, depending on the number of preloaded channels, you can pass in a new Token for preloading in different ways:
                        <ul>
                            <li>For a single channel: call this method again with the new Token.</li>
                            <li>For multiple channels:
                                <ul>
                                    <li>If you use a wildcard Token, call <xref keyref="updatePreloadChannelToken"/> to update the Token for all preloaded channels. When generating a wildcard Token, the user ID must not be set to 0. See [Wildcard Token](https://doc.shengwang.cn/doc/rtc/flutter/best-practice/wildcard-token).</li>
                                    <li>If you use different Tokens: call this method and pass in your user ID, corresponding channel name, and the updated Token.</li>
                                </ul>
                            </li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="flutter">
                    <pt>channelId</pt>
                    <pd>The name of the channel to preload. This parameter identifies the channel for real-time audio and video communication. Under the same App ID, users who enter the same channel name will join the same channel for audio and video interaction.
This parameter must be a string no longer than 64 bytes. Supported character set (89 characters total):
                        <ul>
                            <li>26 lowercase letters a~z</li>
                            <li>26 uppercase letters A~Z</li>
                            <li>10 digits 0~9</li>
                            <li>"!", "#", "$", "%", "&amp;", "(", ")", "+", "-", ":", ";", "&lt;", "=", ".", "&gt;", "?", "@", "[", "]", "^", "_", "{", "}", "|", "~", ","</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="flutter">
                    <pt>uid</pt>
                    <pd>User ID. This parameter identifies the user in the real-time audio and video channel. You need to set and manage the user ID yourself and ensure it is unique within the same channel. This parameter is a 32-bit unsigned integer. Recommended range: 1 to 2^32-1. If not specified (i.e., set to 0), the SDK automatically assigns one and returns it in the <xref keyref="onJoinChannelSuccess"/> callback. The application must store and manage this return value, as the SDK does not maintain it.</pd>
                </plentry>
                <plentry props="unity">
                    <pt>token</pt>
                    <pd>A dynamic key generated on your server for authentication. See [Token Authentication](https://doc.shengwang.cn/doc/rtc/unity/basic-features/token-authentication).
When the Token expires, depending on the number of preloaded channels, you can provide a new Token in different ways:
                        <ul>
                            <li>Preloading a single channel: call this method with the new Token.</li>
                            <li>Preloading multiple channels:
                                <ul>
                                    <li>If you use a wildcard Token, call <xref keyref="updatePreloadChannelToken"/> to update the Token for all preloaded channels. When generating a wildcard Token, the user ID must not be 0. See [Using Wildcard Tokens](https://doc.shengwang.cn/doc/rtc/unity/best-practice/wildcard-token).</li>
                                    <li>If you use different Tokens: call this method with your user ID, corresponding channel name, and the updated Token.</li>
                                </ul>
                            </li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="unity">
                    <pt>channelId</pt>
                    <pd>The name of the channel to preload. This parameter identifies the channel for real-time audio and video interaction. Users with the same App ID and channel name will enter the same channel for interaction.
This parameter is a string up to 64 bytes in length. The supported character set (89 characters total) includes:
                        <ul>
                            <li>26 lowercase letters a–z</li>
                            <li>26 uppercase letters A–Z</li>
                            <li>10 digits 0–9</li>
                            <li>"!", "#", "$", "%", "&amp;", "(", ")", "+", "-", ":", ";", "&lt;", "=", ".", "&gt;", "?", "@", "[", "]", "^", "_", "{", "}", "|", "~", ","</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="unity">
                    <pt>uid</pt>
                    <pd>User ID. This parameter identifies the user in the real-time audio and video interaction channel. You need to set and manage the user ID yourself and ensure that each user ID in the same channel is unique. This parameter is a 32-bit unsigned integer. Recommended range: 1 to 2^32 - 1. If not specified (i.e., set to 0), the SDK will automatically assign one and return it in the <xref keyref="onJoinChannelSuccess"/> callback. The application must store and maintain this return value, as the SDK does not manage it.</pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="electron flutter rn unity">
            <title>Return Values</title>
            <p props="electron">
                <ul>
                    <li>0: Method call succeeds.</li>
                    <li>&lt; 0: Method call fails. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and resolution suggestions.
                        <ul>
                            <li>-7: <xref keyref="IRtcEngine"/> object is not initialized. You need to initialize the <xref keyref="IRtcEngine"/> object successfully before calling this method.</li>
                            <li>-102: Invalid channel name. You need to enter a valid channel name and rejoin the channel.</li>
                        </ul>
                    </li>
                </ul>
            </p>
            <p props="rn">
                <ul>
                    <li>0: The method call succeeds.</li>
                    <li>&lt; 0: The method call fails. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and resolution suggestions.
                        <ul>
                            <li>-7: <xref keyref="IRtcEngine"/> is not initialized. Initialize <xref keyref="IRtcEngine"/> before calling this method.</li>
                            <li>-102: Invalid channel name. Provide a valid channel name and rejoin the channel.</li>
                        </ul>
                    </li>
                </ul>
            </p>
            <p props="flutter">When the method call succeeds, there is no return value; when fails, the <xref keyref="AgoraRtcException"/> exception is thrown. You need to catch the exception and handle it accordingly. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and resolution suggestions.
                <ul>
                    <li>&lt; 0: The method call fails. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and resolution suggestions.
                        <ul>
                            <li>-7: The <xref keyref="IRtcEngine"/> object is not initialized. You need to initialize the <xref keyref="IRtcEngine"/> object before calling this method.</li>
                            <li>-102: Invalid channel name. You need to enter a valid channel name and rejoin the channel.</li>
                        </ul>
                    </li>
                </ul>
            </p>
            <p props="unity">
                <ul>
                    <li>0: The method call succeeds.</li>
                    <li>&lt; 0: The method call fails. See [Error Codes](https://docs.agora.io/en/video-calling/troubleshooting/error-codes) for details and resolution suggestions.
                        <ul>
                            <li>-7: The <xref keyref="IRtcEngine"/> object is not initialized. You need to initialize the <xref keyref="IRtcEngine"/> object successfully before calling this method.</li>
                            <li>-102: Invalid channel name. You need to provide a valid channel name and rejoin the channel.</li>
                        </ul>
                    </li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>