<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="callback_irtcengineeventhandler_onrequesttoken">
    <title><ph keyref="onRequestToken"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="electron">Callback when the Token has expired.</ph><ph id="shortdesc" props="rn">Occurs when the token has expired.</ph><ph id="shortdesc" props="flutter">Callback when the token has expired.</ph><ph id="shortdesc" props="unity">Callback when the token has expired.</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="onRequestToken"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="electron" outputclass="language-typescript">onRequestToken?(connection: RtcConnection): void;</codeblock>
                <codeblock props="rn" outputclass="language-typescript">onRequestToken?(connection: RtcConnection): void;</codeblock>
                <codeblock props="flutter" outputclass="language-dart">final void Function(RtcConnection connection)? onRequestToken;</codeblock>
                <codeblock props="unity" outputclass="language-csharp">public virtual void OnRequestToken(RtcConnection connection) {}</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="electron">During audio and video interaction, if the Token becomes invalid, the SDK triggers this callback to report that the Token has expired.
When you receive this callback, you need to generate a new Token on your server and update it using one of the following methods:
                <ul>
                    <li>Single-channel scenario:
                        <ul>
                            <li>Call <xref keyref="renewToken"/> to pass in the new Token.</li>
                            <li>Call <xref keyref="leaveChannel2"/> to leave the current channel, then pass in the new Token when calling <xref keyref="joinChannel2"/> to rejoin the channel.</li>
                        </ul>
                    </li>
                    <li>Multi-channel scenario: Call <xref keyref="updateChannelMediaOptionsEx"/> to pass in the new Token.</li>
                </ul>
            </p>
            <p props="rn">During an audio or video call, if the token becomes invalid, the SDK triggers this callback to report that the token has expired.
When you receive this callback, you need to generate a new token on your server and update it using one of the following methods:
                <ul>
                    <li>Single-channel scenario:
                        <ul>
                            <li>Call <xref keyref="renewToken"/> to pass in the new token.</li>
                            <li>Call <xref keyref="leaveChannel2"/> to leave the current channel, then call <xref keyref="joinChannel2"/> with the new token to rejoin the channel.</li>
                        </ul>
                    </li>
                    <li>Multi-channel scenario: Call <xref keyref="updateChannelMediaOptionsEx"/> with the new token.</li>
                </ul>
            </p>
            <p props="flutter">During audio and video interaction, if the token becomes invalid, the SDK triggers this callback to report that the token has expired.
When you receive this callback, you need to generate a new token on your server and update it using one of the following methods:
                <ul>
                    <li>Single-channel scenario:
                        <ul>
                            <li>Call <xref keyref="renewToken"/> to pass in the new token.</li>
                            <li>Call <xref keyref="leaveChannel2"/> to leave the current channel, then call <xref keyref="joinChannel2"/> with the new token to rejoin.</li>
                        </ul>
                    </li>
                    <li>Multi-channel scenario: Call <xref keyref="updateChannelMediaOptionsEx"/> with the new token.</li>
                </ul>
            </p>
            <p props="unity">During audio and video interaction, if the token becomes invalid, the SDK triggers this callback to report that the token has expired.
When you receive this callback, you need to generate a new token on your server and update the token using one of the following methods:
                <ul>
                    <li>Single-channel scenario:
                        <ul>
                            <li>Call <xref keyref="renewToken"/> to pass in the new token.</li>
                            <li>Call <xref keyref="leaveChannel2"/> to leave the current channel, then call <xref keyref="joinChannel2"/> with the new token to rejoin the channel.</li>
                        </ul>
                    </li>
                    <li>Multi-channel scenario: Call <xref keyref="updateChannelMediaOptionsEx"/> to pass in the new token.</li>
                </ul>
            </p>
        </section>
        <section id="parameters" deliveryTarget="details" props="electron flutter rn unity">
            <title>Parameters</title>
            <parml>
                <plentry props="electron">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="rn">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="flutter">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
                <plentry props="unity">
                    <pt>connection</pt>
                    <pd>Connection information. See <xref keyref="RtcConnection"/>.</pd>
                </plentry>
            </parml>
        </section>
    </refbody>
</reference>