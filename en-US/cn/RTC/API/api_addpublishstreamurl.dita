<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_addpublishstreamurl">
    <title><ph keyref="addPublishStreamUrl"/></title>
    <shortdesc id="short"><ph id="shortdesc">Publishes the local stream to a specified CDN live address. (CDN live only.)</ph></shortdesc>
    <prolog>
        <metadata>
   <keywords>
       <indexterm keyref="addPublishStreamUrl" />
   </keywords>
        </metadata>
    </prolog>
    <refbody><section id="prototype">

        <p conref="../conref/conref_rtc_api.dita#apidef/addPublishStreamUrl"/>
        </section>
        <section id="detailed_desc">

   <p>The SDK returns the result of this method call in the &quot;onStreamPublished&quot; callback. The SDK will trigger a callback locally<xref keyref="onRtmpStreamingStateChanged"/> to report the status of adding the bypass push address.</p>
   <note type="attention" id="note">
       <ul>
  <li>Call this method after joining a channel.</li>
  <li>Ensure that you enable the RTMP Converter service before using this function. See Prerequisites in the advanced guide Push Streams to CDN.</li>
  <li>This method takes effect only when you are a host in live interactive streaming.</li>
  <li>This method adds only one stream CDN streaming URL each time it is called. To remove multiple URLs, call this method multiple times.</li>
  <li>Agora supports pushing media streams in RTMPS protocol to the CDN only when you enable transcoding.</li>
       </ul>
   </note>
        </section>
        <section id="parameters"><title>Parameter</title>
   <parml>
       <plentry id="url">
  <pt>url</pt>
  <pd>@param url The CDN streaming URL in the RTMP or RTMPS format. The maximum length of this parameter is 1024 bytes. The CDN streaming URL must not contain special characters, such as Chinese language characters.</pd>
       </plentry>
       <plentry>
  <pt>The host in a channel can call the addPublishStreamUrl method to add a media stream to the CDN.</pt>
  <pd>
      <p id="transcoding-desc">是否转码。 <xref keyref="term-transocding" scope="external" format="html"
                            />是指在旁路推流时对音视频流进行转码处理后再推送到其他 CDN 服务器。 多适用于频道内有多个主播，需要进行混流、合图的场景。<ul>
                                <li><ph keyref="true"/>: 转码。</li>
                                <li><ph keyref="false"/>false: Disable transcoding.</li>
                            </ul></p>
      <note type="attention">如果该参数设为 <ph keyref="true"/>，需先调用 <xref keyref="setLiveTranscoding"/> 方法。</note>
  </pd>
       </plentry>
   </parml>
        </section>
        <section id="return_values">
   <title>Returns</title>
   <ul>
       <li>0: Success.</li>
       <li>&lt; 0: Failure.<ul>
                        <li>#<codeph>ERR_INVALID_ARGUMENT</codeph> (-2): The CDN streaming URL is NULL or has a string length of 0.</li>
                        <li>#ERR_NOT_INITIALIZED (-7): You have <codeph>not initialized</codeph> the RTC engine when publishing the stream.</li>
                    </ul>
                </li>
   </ul>
        </section></refbody>
</reference>
