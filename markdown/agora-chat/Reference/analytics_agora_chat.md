
[声网水晶球](https://docs.agora.io/cn/Agora%20Analytics/aa_guide?platform=All%20Platforms)为即时通讯 IM 提供用量和质量数据的阶段性分析，帮助你掌握用量变化趋势、跟踪产品质量情况。

声网水晶球为即时通讯 IM 提供以下功能：

- 自动采集、处理和存储多个用量和质量指标的数据，数据延时为 1 分钟。
- 查看用户、群组、聊天室数量的当天情况与历史趋势，以及消息总数和消息类型的历史趋势。
- 查看终端 SDK API 和服务器端 RESTful API 调用的请求次数、请求成功率、平均时延等。

[开启和配置即时通讯服务](./enable_agora_chat#开启即时通讯-IM-服务)后，水晶球的即时通讯相关功能会默认开启，无需额外操作。

## 用量洞察

参考如下步骤查看即时通讯 IM 用量洞察页面：

1. 登录[声网控制台](https://console.agora.io/)，在左侧菜单栏中点击**水晶球** > **AgoraChat 用量洞察**。
2. 在页面左上方的下拉菜单中选择需要查看的声网项目。
3. 在页面上方点击**场景规模**或**消息量统计**页签。

### 场景规模

场景规模页面展示用户、群组、聊天室数量的当天情况与历史趋势，具体包括以下版块：

|| 描述 | 注意事项 |
| :----------- | :------------ | :------------------- |
| 今日概览 | 各项关键指标截止到今日的数值。指标含义详见[场景规模指标](./analytics_agora_chat_glossary#场景规模指标)。 | /|
| 历史数据统计 | 以折线图或柱形图展示部分关键指标在某一时间范围内的变化趋势。 | <li>支持查询过去 30 天的数据。</li><li>该版块所有指标的统计粒度均为天，数据有 1 分钟的延迟（今日聊天室最高同时在线人数除外，该指标的数据延迟为 10分钟）。</li> |

以聊天室的历史数据统计为例，不同指标采用了不同的图展示：

- 红色柱形图代表新增聊天室数量。
- 绿色柱形图代表解散聊天室数量。
- 折线图代表聊天室总数、最高同时在线人数和今日活跃聊天室数。

点击指标图例，可以隐藏该指标的柱形图或折线图。

### 消息量统计

消息量统计页面展示消息数量和消息类型的历史趋势，具体包括以下版块：

|| 描述 | 注意事项 |
| :----------- | :------------------ | :---------------- |
| 消息量趋势 | 以折线图展示消息总数在某一时间范围内的变化趋势。指标含义详见[消息量指标](./analytics_agora_chat_glossary#消息指标)。 | <li>支持查询过去 6 个月的数据。</li><li>该版块所有指标的统计粒度均为天，数据有 1 分钟的延迟。</li> |
| 消息类型趋势 | 分类型展示消息数量在某一时间范围内的变化趋势和占比。指标含义详见[消息量指标](./analytics_agora_chat_glossary#消息指标)。 | <li>支持查询过去 6 个月的数据。</li><li>该版块所有指标的统计粒度均为天，数据有 1 分钟的延迟。</li> |

以查看聊天室的上行消息类型趋势为例，饼图包括以下信息：

- 默认展示所选时间范围内，单聊上行消息中各类型消息的占比。
- 在左侧折线图中点击选中某一天的数据后，饼图会更新为当天的单聊上行消息中各类型消息的占比。点击**返回**。

## 质量洞察

参考如下步骤查看即时通讯 IM 质量洞察页面：

1. 登录[控制台](https://console.agora.io/)，在左侧菜单栏中点击**水晶球** > **AgoraChat 质量洞察**。

2. 在页面左上方的下拉菜单中选择需要查看的声网项目。

3. （可选）在页面右上方选择按天、小时或分钟展示某一时间范围的终端数据和 Server API 数据。默认是按分钟展示最近 30 分钟的数据。

 <div class="alert info">最多支持查询最近 7 天的数据。按小时的粒度下，单次查询的时间范围不能超过 24 小时；按分钟的粒度下，单次查询的时间范围不能超过 30 分钟。
 </div>

4. 在页面上方点击**终端数据**或 **Server API 数据**页签，跳转到对应版块。

### 终端数据

终端数据版块展示终端 SDK API 的请求次数、请求成功率、平均时延数据。指标类型和指标的含义详见[终端数据指标](./analytics_agora_chat_glossary#终端数据指标)。

为了更直观的呈现数据，不同指标采用了不同的图表形式，具体说明如下：

| 指标| 左侧地图 | 右侧图 | 交互说明 |
| :------------------ | :----------- | :---------------- | :-------------- |
| 请求次数| 请求次数越高，该区域的颜色越深。 | 折线图。 | 首次进入页面时，右侧时序图默认展示左侧地图上所有区域的指标数据之和。在左侧地图单击某一区域后，右侧时序图会更新为该区域的指标数据。 |
| 1s/3s/5s 请求成功率 | 请求次数越高，该区域的颜色越深。 气泡直径越大，该区域的请求成功率越低。 | 折线图。 ||
| 平均时延| 请求次数越高，该区域的颜色越深。 气泡直径越大，该区域的平均时延越高。 | 热力图，其中横坐标为时间，纵坐标为时延分桶。方块颜色越深，对应时间范围内的请求次数越高。 ||

### Server API 数据

Server API 数据版块以折线图展示服务器端 REST API 接口调用的请求次数、请求成功率、平均时延数据。指标类型和指标的含义详见[Server API 数据指标](./analytics_agora_chat_glossary#Server-API-数据指标)。

<div class="alert note">Server API 数据包含了一部分 SDK 对 REST API 接口的调用。例如 SDK 端的群组操作是通过 REST API 调用的，因此也会统计在 Server API 数据里。</div>

为了更直观的呈现数据，不同指标采用了不同的图表形式，具体说明如下：

| 指标| 图 |
| :---------- | :---------- |
| 请求次数| 折线图。 |
| 1s/3s/5s 请求成功率 | 折线图。 |
| 平均时延| 热力图，其中横坐标为时间，纵坐标为时延分桶。方块颜色越深，对应时间范围内的请求次数越高。 |