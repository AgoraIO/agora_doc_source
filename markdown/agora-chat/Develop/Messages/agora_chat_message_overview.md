在实时消息应用程序中，消息从消息发送者传输到消息接收者。本页面概述了即时通讯 SDK 支持的消息类型和消息功能。

## 消息类型

即时通讯 SDK 支持以下类型的消息。

### 文本消息

消息内容为文本，包括超链接和表情符号。文本消息的最大数据长度为 3 KB。

### 图片消息

图片消息本质上是附件消息。要发送图片消息，需要将图片上传到聊天服务器。当收件人收到消息时，SDK 会自动下载图片缩略图。图片不能超过 10 MB，图片消息的最大数据长度为 3 KB。

### 语音消息

语音消息本质上是附件消息。要发送语音消息，需要将音频文件上传到聊天服务器。当接收方收到语音消息时，SDK 会自动下载音频文件。音频文件不能超过 10 MB，语音消息的最大数据长度为 3 KB。

### 视频消息

视频消息本质上是附件消息。要发送视频消息，需要将视频文件上传到聊天服务器。当接收方收到视频消息时，SDK 会自动下载视频文件缩略图。要下载视频文件，用户需要点击缩略图。视频文件不能超过 10 MB，视频消息的最大数据长度为 3 KB。

### 文件消息

文件消息本质上是附件消息。要发送文件消息，需要将文件上传到聊天服务器。当接收方收到文件消息时，SDK 会自动下载文件。附件大小不能超过 10 MB，文件消息的最大数据长度为 3 KB。

### 位置消息

发送位置信息，需要通过第三方地图服务商获取位置的经纬度信息。当接收方收到位置信息时，SDK 根据经纬度信息在第三方地图服务商中显示位置。

### 透传消息

透传消息告诉接收者采取某种行动。接收者收到透传消息消息后，自行处理命令。不需要在用户界面上呈现透传消息。你可以使用透传消息更新头像和昵称并同步此更新。透传消息不存储在本地数据库中。透传消息的最大数据长度为 3 KB。

### 消息自定义扩展

如果文本、附件和位置消息不符合业务需求，你可以使用消息自定义扩展。一个典型的用例是发送引用较早文本或图像消息的消息。扩展消息的数据长度不得超过原始消息类型的数据长度。

### 自定义消息

你自定义的消息类型。可以自定义多种消息类型并为每种类型添加名称。典型的用例是红包消息和模板消息。自定义消息的大小限制为 3 KB。

## 消息功能

即时通讯 SDK 支持收发消息、管理历史消息、管理消息已读回执。

<div class="alert note">Web 端无本地消息储存。</div>

可以使用即时通讯 IM 的 API 实现以下功能。

### 发送和接收消息

所有聊天用户都可以发送和接收消息。

- 单聊：2 个用户建立的会话，双方可以在会话中收发消息。
- 群聊：会话由群成员发送的消息组成。
- 聊天室：会话是由聊天室成员发送的消息组成。
 
在上述场景中，两个用户之间、每个群组中以及每个聊天室中的消息也称为会话。
  
### 获取所有本地会话

获取本地所有的会话，消息本地存储有已读未读状态，会话中包含会话的未读消息数。

### 获取指定会话的消息

从本地数据库中获取指定会话的消息，进入会话时，获取会话内容。

### 获取指定会话的未读消息数量

从本地数据库中获取指定会话的未读消息数，用以显示指定会话未读消息数。

### 设置所有消息已读

一旦用户阅读了所有消息，未读消息的数量就会被清零。也可以清零指定会话或所有会话的未读消息数。

### 删除本地会话和历史消息

用户可以删除本地设备上的对话，同时可以选择是否清除聊天记录。

### 使用关键字搜索会话消息

可以根据关键字对会话里的消息内容进行搜索。

### 将消息导入数据库

当需要将外部的消息导入到本地数据库时，可以使用该功能。需要构造消息对象。

### 插入消息

模拟收到某些消息通知，可以构造一条消息并写入会话。

### 获取服务器端历史消息

除了本地设备，你还可以从服务器获取会话和历史消息。

### 获取指定会话的历史消息

即时通讯 IM SDK 将历史消息存储在聊天服务器中，用户可以通过分页从服务器中获取每个会话的历史消息。历史消息存储时间与套餐版本相关，详见 [消息存储时长的限制](#limitation)。

### 消息送达回执

SDK 支持在消息发送成功时发送消息送达回执。

### 消息已读回执

在一对一聊天和群聊中，SDK 支持在消息接收者已阅读消息时发送消息已读回执。

## 消息存储时长的限制<a name="limitation"></a>

根据不同的套餐版本，消息存储时长（在即时通讯服务器上的保存的最长时间）如下：

| 套餐版本 | 消息存储时长（天） |
| :------- | :----------------- |
| 免费版   | 3                  |
| 基础版   | 7                  |
| 进阶版   | 90                 |
| 企业版   | 自定义（默认 180 天）|