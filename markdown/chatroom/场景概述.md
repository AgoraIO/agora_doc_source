语音连麦聊天是在线交友、游戏娱乐等场景下常见的用户互动方式。为了给用户带来更沉浸式更趣味性的语音聊天体验，声网推出声动语聊方案。声动语聊是搭载声网最新音频技术，沉淀声网最佳音效实践的在线语音聊天室（简称“语聊房”）。语聊房支持用户通过音频连麦进行互动，通过文字消息进行辅助聊天，通过弹幕、礼物等活跃房间气氛。开发者可使用声动语聊方案搭建契合业务需求的语聊应用，例如语音电台、K 歌、游戏语音开黑房、你画我猜等游戏派对房。

## 方案优势

|优势概述|详情|
|----|----|
| 搭载最新音频技术，打造更沉浸式的互动玩法   | <li>声动语聊采用声网新一代音频技术智能引擎，包含空间音频、AI 降噪、AI 回声消除、变声音效等功能，使语音互动中的声音具有方位感和空间感。</li><li>语聊房可以有效屏蔽和抑制环境中的噪音和回声，打造更纯净、更沉浸的语音互动。</li>   |
| 行业顶尖音效配置，聊得尽兴，玩得开心    |声动语聊综合声网超过万亿分钟的用户音效偏好的数据模型，汇总梳理语聊领域各类头部 app 的音效配置，并结合声网音频专家的多年沉淀与研究，提供针对各种语音场景的最佳音效配置，让用户享受行业顶尖的音效体验。    |
| 搭积木式开发，接入成本低    | 语聊房的客户端功能以组件化形式提供，开发者可以像搭积木一样按需调用对应组件（包括弹幕组件、席位管理组件、音效组件、房间管理组件），灵活高效，大幅降低开发接入成本。   |


## 支持功能

- 多人实时语音：语聊房内多位用户实时连麦语聊。
- 多种方式的麦位管理：上麦、下麦、静音、锁麦、换麦。详见[麦位管理](#TODO)。
- 房主为不同业务场景设置语聊房的最佳音效：包括语聊社交、KTV、游戏陪玩、专业音频直播的语音场景。
- 用户自定义个人音效：
    - AI 降噪（Noise Suppression，NS）：可以降低用户语聊时的噪音，例如电视噪声、厨房噪声、街道环境噪声、机器运转的嗡嗡噪声、办公室常见的键盘鼠标的敲击噪声、家庭中其他成员开关门和婴儿啼哭的噪声、装修噪声、玩手机时手指摩擦麦克风或敲击屏幕的噪声、干扰用户语聊的音乐和鼓掌声等。
    - AI 回声消除（Acoustic Echo Cancellation，AEC）：可以消除用户语聊时的回声。实时音频互动时，回声可能来自于多种场景，详见[回声消除概述](https://docportal.shengwang.cn/cn/live-streaming-premium-legacy/indoor_echo_cancellation?platform=Android#概述)。开启 AI 回声消除后，可以提升聊天时的音质体验，例如用户开启伴奏唱歌时，AI 回声消除可以使歌唱声更清晰。
    - 语音自动增益（Automatic Gain Control，AGC）：可以自动调整用户唱歌的音量，以匹配伴奏音量，解决用户人声被伴奏声压制的问题。推荐在唱歌场景下设置。
- 空间音效：可以使用户听到的音频具有 3D 空间立体感，让用户感觉更身临其境。用户可以调节麦位在空间中的位置，以选择更好的方位和距离来收听其他用户的发言。详见[空间音效](https://docportal.shengwang.cn/cn/live-streaming-premium-4.x/spatial_audio_android_ng?platform=Android)。
- 低延时耳返：通过 `enableInEarMonitoring` 方法开启。
- 房间内播放背景音乐或音效：房主可以播放本地音乐文件、在线音乐文件、声网内容中心的版权音乐、第三方厂商的版权音乐。详见[#TODO]()。
- 音量波纹提示：监听用户声音的音量并创造与音量高低相对应的波纹效果。详见[#TODO]()。
- 录制：通过声网[本地服务端录制](https://docportal.shengwang.cn/cn/Recording/product_recording?platform=Linux)或[云端录制](https://docportal.shengwang.cn/cn/cloud-recording/product_cloud_recording?platform=All%20Platforms)服务对语聊房进行录制。本地录制服务费用较低，但是集成难度较高；云端录制更简单易用，但费用较高。
- 语音审核：通过声网云市场丰富的插件实现语音审核，例如使用[依图](https://docportal.shengwang.cn/cn/extension_customer/quickstart_yitu_moderation_audio?platform=All%20Platforms)、[数美](https://docportal.shengwang.cn/cn/extension_customer/quickstart_shumei_moderation_audio?platform=All%20Platforms)、[图普](https://docportal.shengwang.cn/cn/extension_customer/quickstart_tupu_moderation_audio?platform=All%20Platforms)语音审核插件。
- 防止炸房捣乱现象：预防和应对炸房捣乱现象的有效措施，帮助维护房间秩序，提高业务安全性。详见[预防和应对炸房捣乱现象最佳实践](https://docportal.shengwang.cn/cn/live-streaming-premium-legacy/prevent_stream_bombing?platform=Android)。


## 支持平台

声动语聊目前支持 Android 和 iOS 平台。

## 技术架构

//TODO 内容待 review 和改图

![](https://docimg6.docs.qq.com/image/AgAACiNGFGPqsnXYVn9PVaqJMEznJyDL.png?w=1172&h=782)

架构说明：

房主、麦上嘉宾通过声网 RTC SDK 进行语音互动，房间内观众通过声网 RTC SDK 收听。IM 服务用于麦位状态同步、文字以及礼物消息的传递。

声网提供的服务端 RESTful API 包含消息通知、频道管理、旁路推流等功能。

- 消息通知服务：开发者需要提供一个服务器地址来接收声网频道内的消息通知，如加入频道、角色变化（主播切换为观众、观众切换为主播）、离开频道等。消息通知服务还包括其它的消息通知。
- 频道管理服务：提供频道内用户信息查询以及解散房间和踢人操作等。
- 旁路推流服务：将 RTC 频道内的音视频推流到 CDN 做音视频分发。

APP 业务服务器需要实现以下功能：

- Token 生成：加入声网频道时需要用到的一个秘钥，按照声网规则生成。
- 麦位管理：维护合法用户的麦位信息。
- 频道内用户信息查询、踢人等操作。

本地录制服务：使用声网 Linux SDK 可以对频道内音视频进行录制。相比云录制，本地录制成本更低。

云录制：直接使用声网 RESTful API，配置好第三方云存储后，即可发起云录制，将频道内的音视频存储到指定云存储中。本地录制和云录制各有优缺点，根据需求和场景选择合适的录制方式。
