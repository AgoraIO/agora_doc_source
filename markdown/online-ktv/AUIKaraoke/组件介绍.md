本文介绍针对 K 歌场景的含 UI 解决方案 AUIKaraoke。

## 组件概述

AUIKaraoke 是声网针对 K 歌场景推出的开源 UI 组件，集成了 [K 歌房场景化 API]() 以及声网实时互动 SDK、RTM SDK。该组件基于 [AUIKit](https://github.com/AgoraIO-Community/AUIKit/tree/main)  开发，主要提供房间管理功能。AUIKit 是一套场景化应用的脚手架，为 AUIKaraoke 提供可自定义的 UI 组件和一套通用的服务接口（Service），支持你基于 UI 组件像搭积木一样快速搭建起自己的业务逻辑。

你可以查看 AUIKaraoke [组件源码](https://github.com/AgoraIO-Community/AUIKitKaraoke)快速搭建一个含 UI 界面的在线 K 歌房间，体验在线点歌、 K 歌、麦位管理、收发礼物、文字聊天等在线 K 歌场景中的核心交互。

下图展示 AUIKaraoke 和 AUIKit 之间的关系：

<img src="https://web-cdn.agora.io/docs-files/1695201504874" style="zoom:50%;" />

1. App：接入 AUIKaraoke 的项目

2. AUIKaraoke：以源码方式集成的库，可在上面进行自定义，其中

   - `KaraokeUIKit` 负责房间管理以及 Service、View 的统一调度
   - `KaraokeRoomView` 是默认的 K 歌房 View。你可以根据需求进行自定义修改。
   - binder 负责将 Service 和 UI 逻辑绑定起来。
   - `AUIKiaraokeRoomService` 负责管理用到的 AUIKit 提供的 Service。

3. AUIKit：基础库，包含 Service 和 UI 两部分，为上层提供基础业务能力和 UI 组件。

## 核心功能

AUIKaraoke 提供下列核心功能：

**房间管理**：

- 创建、销毁房间。
- 获取房间列表，便于对所有房间进行管理。

**麦位管理**：

- 上麦和下麦：用户可以随时上下麦，实现多人互动 K 歌。
- 踢人下麦：房主可以将用户从麦位上踢下来，以管理麦位的占用情况。
- 封禁和锁麦：麦位可以被封禁或锁定，以更好维护 K 歌房间内秩序。

**音乐播放器**：

- 歌曲控制：可以随时控制音乐的播放，如预加载、暂停、切歌等。

**歌曲管理**：

- 搜索歌曲：通过歌曲或歌手关键词搜索，检索查找自己喜欢的歌曲。声网曲库涵盖 20万+ 正版歌曲。
- 点歌和切歌：用户可以点播自己喜欢的歌曲，并在需要时切换到下一首。
- 置顶歌曲：房主可以将某首歌曲置顶，确保它在播放列表中优先播放。

**合唱功能**：

- 加入、离开合唱：用户可以随时加入或离开合唱，与上麦的演唱者一起享受 K 歌的乐趣。
- 歌词同步：进行合唱时，主唱、伴唱、观众端的歌词可以实现同步，提供更出色的合唱体验。

**收发礼物**：房间内的用户彼此之间可以送礼物，增加互动趣味性。

**文字聊天**：除了上麦互动，K 歌房间内的用户彼此之间还可以发送文字消息。

<img src="https://web-cdn.agora.io/docs-files/1695201580570" style="zoom:30%;" />

## 方案对比

除了 AUIKaraoke 这一含 UI 的解决方案，目前声网针对在线 K 歌房场景还提供了无 UI 解决方案，其中无 UI 解决方案包括[无场景化方案](https://confluence.agoralab.co/)、[场景化 API 方案](https://confluence.agoralab.co/)，各方案之间的对比详见[方案对比]()。

【这篇文档链接到k歌房场景介绍里面的方案对比，为了方便review所以贴在这里，之后会删掉】

| 类别         | AUIKaraoke                                                   | 无场景化方案                                                 | 场景化 API 方案                                              |
| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 适用客户     | 适用于开发基础较弱、开发排期紧、需要快速上线的用户。         | 适用于开发能力强且定制化需求极高的用户。                     | 适用于开发排期紧、需快速上线、有一定定制化需求的用户。       |
| 功能实现难度 | 低；可在 10 行代码内搭建一个的 K 歌场景应用。                | 中等；需直接使用实时互动 SDK 接口，并自行设计、开发所有业务逻辑和 UI。 | 较低；场景化 API 代码结构较为简单，使用场景化 API 可以简化歌曲管理、播放管理等逻辑，但房间管理、麦位管理等功能及 UI 需自行开发设计。 |
| 可拓展性     | 中等；支持通过组件自定义 K 歌房间的 UI 和相关业务逻辑，如 UI 的调整、业务的增删。如有更灵活的自定义需求，可以直接使用 AUIKit 提供的 UI 和 Service 组件进行组合开发。 | 高；可自行进行功能定制化修改。                               | 较高，可自行进行功能定制化修改。                             |
| 接入难度     | 较低；将实时互动 SDK、RTM SDK、场景化 API 统一封装在组件内，集成 AUIKaraoke、AUIKit 即可实现场景搭建。 | 中等；需要根据自己实际的业务需求自行集成实时互动、RTM 等 SDK。 | 低；需要集成集成场景化 API、实时互动 SDK。                   |

<Admonition type="caution" title="注意">不同的方案计费方式不同，详情请联系[技术支持](https://docs.agora.io/cn/Agora%20Platform/ticket?platform=All%20Platforms)。</Admonition>





