---
title: 为什么录制文件会出现异常？
platform: ["Linux"]
updatedAt: 2020-07-09 21:35:33
Products: ["Recording"]
---

### 录制文件夹下没有生成录制文件

- 检查 `appId` 设置的是否与客户端使用 Agora Native SDK 时设置的一样。
- 检查 `channelProfile` 的模式是否与客户端使用 Agora Native SDK 设置的一样。例如，录制的设为直播模式，Agora Native SDK 设置通信模式，直播和通信模式的视频无法互通，因此不会有录制文件。
- 确认录制进程是否成功加入到频道。检查录制的 appid 、频道号是否有效，如果开启了 app certificate，是否携带了 `channelKey` 或 Token，以及`channelKey` 或 Token 是否有效。你可以通过检查录制日志 `recording_sys.log` 里的 `-appID`，`–channel`，`–channelKey` 参数进行判断。
- 确认频道内至少有一个 Native/Web 用户。频道内需要至少有一个 Native/Web 用户才能进行录制。如果只有录制客户端，则无法录到文件。如果频道内确认有用户，则还需要确认用户是否有发流，如果没有发流录制也是不会生成文件的。

### 录制出来的文件时长小于通话时长

通过水晶球检查客户端和录制端在频道内的时间段是否一致。如果一致，联系技术支持。

### 录制结束后，为什么检查录制的视频没有声音？

录制的音视频文件为独立的，视频为 mp4 格式文件，语音为 aac 格式文件。视频文件本身不含语音，你需要手动转码将多个音视频文件合并成一个文件。若检查发现已是转码合成后的最终视频文件，联系技术支持。

### 录制结束之后只有音频文件，没有视频文件

- 检查客户端和录制端的频道模式是否一致。
- 如果频道模式一致，检查录制的参数 `isAudioOnly` 是否设置为 true，设置为 true 只录制音频，不录制视频。

### 录制结束后，为什么无法播放录制的 MP4 文件？

请参考[播放器列表](https://docs.agora.io/cn/faqs/recording_player)，查看是否使用了不支持的播放器。

### 启用加密模式后，为什么无法播放录制的视频文件，声音也不正常？

启用加密模式后，如果密码输入不正确或者没有输入密码，录制的文件无法播放。

由于语音被加密了，导致声音不正常。

### 录制出来的视频，打开播放黑屏，但是声音正常

可能是由于使用了不支持的播放器，请参考[播放器列表](https://docs.agora.io/cn/faqs/recording_player)。

### 为什么录制并转码完成后的视频，在播放的时候，视频前面会黑一小段？

可能的原因如下：

- 网络不好；
- 视频包 I 帧收到之后，才会创建视频录制，在此之前收到其他 B,P 帧会丢掉；
- 视频包的每一帧都比音频的大，所以音频包通常都会比视频包先收到并开启录制。

### 录制出来的视频倒置

请升级至官网最新版本，如还有问题，联系技术支持。

### 录制出来的文件，音画不同步怎么办

请升级至官网最新版本，如还有问题，联系技术支持。
