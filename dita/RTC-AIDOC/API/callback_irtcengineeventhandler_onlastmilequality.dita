<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="callback_irtcengineeventhandler_onlastmilequality">
    <title><ph keyref="onLastmileQuality"/></title>
    <shortdesc id="short"><ph id="shortdesc">报告本地用户的 last-mile 网络质量回调。</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="onLastmileQuality"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual void onLastmileQuality(int quality) { (void)quality; }</codeblock>
                <codeblock props="android" outputclass="language-java">public void onLastmileQuality(int quality)</codeblock>
                <codeblock props="ios" outputclass="language-objectivec">- (void)rtcEngine:(AgoraRtcEngineKit * _Nonnull)engine lastmileQuality:(AgoraNetworkQuality)quality NS_SWIFT_NAME(rtcEngine(_:lastmileQuality:));</codeblock>
                <codeblock props="mac" outputclass="language-objectivec">- (void)rtcEngine:(AgoraRtcEngineKit * _Nonnull)engine lastmileQuality:(AgoraNetworkQuality)quality NS_SWIFT_NAME(rtcEngine(_:lastmileQuality:));</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title" props="android cpp ios mac">
            <p props="cpp">该回调在加入频道前触发，用于报告本地用户与声网边缘服务器之间连接的网络质量（即 last-mile 网络状况）。调用 <xref keyref="startLastmileProbeTest"/> 后，SDK 会触发该回调。</p>
            <p props="android">该回调在用户加入频道前触发，用于上报本地用户与声网边缘服务器之间连接的 last-mile 网络质量。在调用 <xref keyref="startLastmileProbeTest"/> 后，SDK 会触发该回调。</p>
            <p props="ios">该回调在用户加入频道前，由 SDK 在调用 <xref keyref="startLastmileProbeTest"/> 后触发一次，用于上报本地用户的 last-mile 网络状况。last-mile 指的是本地设备与声网边缘服务器之间的连接。</p>
            <p props="mac">该回调在用户加入频道前，由 SDK 在调用 <xref keyref="startLastmileProbeTest"/> 后触发一次，用于上报本地用户的 last-mile 网络状况。last-mile 指的是本地设备与声网边缘服务器之间的连接。</p>
        </section>
        <section id="timing" deliveryTarget="details" props="android ios mac">
            <title>触发时机</title>
            <p props="android">该回调在调用 <xref keyref="startLastmileProbeTest"/> 方法后被触发。</p>
            <p props="ios">该回调在调用 <xref keyref="startLastmileProbeTest"/> 后被触发，用于上报本地用户的 last-mile 网络状况。</p>
            <p props="mac">该回调在调用 <xref keyref="startLastmileProbeTest"/> 后被触发，用于上报本地用户的 last-mile 网络状况。</p>
        </section>
        <section id="restriction" deliveryTarget="details" props="android cpp ios mac">
            <title>使用限制</title>
            <p props="cpp">无。</p>
            <p props="android">无。</p>
            <p props="ios">无。</p>
            <p props="mac">无。</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp ios mac">
            <title>参数</title>
            <parml>
                <plentry props="cpp">
                    <pt>quality</pt>
                    <pd>last-mile 网络质量，详见 <xref keyref="QUALITY_TYPE"/>。</pd>
                </plentry>
                <plentry props="android">
                    <pt>quality</pt>
                    <pd>last-mile 网络质量：
                        <ul>
                            <li><codeph>QUALITY_UNKNOWN</codeph> (0)：网络质量未知。</li>
                            <li><codeph>QUALITY_EXCELLENT</codeph> (1)：网络质量极好。</li>
                            <li><codeph>QUALITY_GOOD</codeph> (2)：网络质量较好，但码率可能略低于极好。</li>
                            <li><codeph>QUALITY_POOR</codeph> (3)：通信质量略有下降。</li>
                            <li><codeph>QUALITY_BAD</codeph> (4)：无法流畅通信。</li>
                            <li><codeph>QUALITY_VBAD</codeph> (5)：网络质量极差，几乎无法通信。</li>
                            <li><codeph>QUALITY_DOWN</codeph> (6)：网络连接已断，无法通信。</li>
                            <li><codeph>QUALITY_DETECTING</codeph> (8)：正在进行 last-mile 探测。</li>
                        </ul>
                    </pd>
                </plentry>
                <plentry props="ios">
                    <pt>engine</pt>
                    <pd>引擎对象，详见 <xref keyref="IRtcEngine"/>。</pd>
                </plentry>
                <plentry props="ios">
                    <pt>quality</pt>
                    <pd>last-mile 网络质量，详见 <xref keyref="QUALITY_TYPE"/>。</pd>
                </plentry>
                <plentry props="mac">
                    <pt>engine</pt>
                    <pd>引擎对象，详见 <xref keyref="IRtcEngine"/>。</pd>
                </plentry>
                <plentry props="mac">
                    <pt>quality</pt>
                    <pd>last-mile 网络质量，详见 <xref keyref="QUALITY_TYPE"/>。</pd>
                </plentry>
            </parml>
        </section>
    </refbody>
</reference>