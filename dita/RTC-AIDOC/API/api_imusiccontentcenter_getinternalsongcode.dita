<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_imusiccontentcenter_getinternalsongcode">
    <title><ph keyref="getInternalSongCode"/></title>
    <shortdesc id="short"><ph id="shortdesc" props="cpp">创建音乐资源副歌片段的内部歌曲编码。</ph><ph id="shortdesc" props="ios">创建音乐资源副歌片段的内部 ID。</ph><ph id="shortdesc" props="android">创建音乐资源副歌片段的内部标识符。</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="getInternalSongCode"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
                <codeblock props="cpp" outputclass="language-cpp">virtual int getInternalSongCode(int64_t songCode, const char* jsonOption, int64_t&amp; internalSongCode) = 0;</codeblock>
                <codeblock props="ios" outputclass="language-objectivec">- (NSInteger)getInternalSongCode:(NSInteger)songCode jsonOption:(NSString * _Nullable)jsonOption  NS_SWIFT_NAME(getInternalSongCode(songCode:jsonOption:));</codeblock>
                <codeblock props="android" outputclass="language-java">public abstract long getInternalSongCode(long songCode, String jsonOption);</codeblock>
            </p>
        </section>
        <section id="detailed_desc" deliveryTarget="details" otherprops="no-title">
            <p props="cpp">在播放音乐资源的副歌片段前，需调用该方法，结合参数 <codeph>jsonOption</codeph> 和音乐资源的 <codeph>songCode</codeph> 创建副歌片段的内部歌曲编码。该编码作为资源的唯一标识。获取该编码后，在调用打开、预加载或移除资源的方法时，将其作为 <codeph>songCode</codeph> 参数传入。</p>
            <p props="ios">调用该方法可结合音乐资源的 <codeph>songCode</codeph> 和 <codeph>jsonOption</codeph> 参数，为该资源的副歌片段创建一个内部 ID。该 ID 是该资源的唯一标识。获取该 ID 后，你需要在调用打开、预加载或移除资源的方法时，将其作为 <codeph>songCode</codeph> 参数传入。</p>
            <p props="android">在播放音乐资源的副歌片段前，需调用该方法，结合音乐资源的 <codeph>songCode</codeph> 和 <codeph>jsonOption</codeph> 参数创建副歌片段的内部标识符。该标识符作为资源的唯一引用。在调用相关方法以打开、预加载或移除资源时，应将该标识符作为 <codeph>songCode</codeph> 参数传入。</p>
        </section>
        <section id="parameters" deliveryTarget="details" props="android cpp ios">
            <title>参数</title>
            <parml>
                <plentry props="cpp">
                    <pt>songCode</pt>
                    <pd>音乐资源的歌曲编码，用于标识资源。你可以通过调用 <xref keyref="getMusicCollectionByMusicChartId"/> 或 <xref keyref="searchMusic"/> 获取，并从这些方法触发的 <xref keyref="onMusicCollectionResult"/> 回调中获取该编码。</pd>
                </plentry>
                <plentry props="cpp">
                    <pt>jsonOption</pt>
                    <pd>
                        <simpletable>
                            <sthead>
                                <stentry>Key</stentry>
                                <stentry>Value 说明</stentry>
                                <stentry>示例</stentry>
                            </sthead>
                            <strow>
                                <stentry>sceneType</stentry>
                                <stentry>场景类型：&lt;br&gt; - 1：秀场直播场景，在线 K 歌房和背景音乐播放。&lt;br&gt; - 2：秀场直播场景，背景音乐播放。&lt;br&gt; - 3：（默认）声动语聊场景，在线 K 歌房。&lt;br&gt; - 4：声动语聊场景，背景音乐播放。&lt;br&gt; - 5：VR 场景，在线 K 歌房和背景音乐播放。&lt;br&gt;注意：声网会根据你传入的 <codeph>sceneType</codeph> 收费，不同场景的计费标准不同。若需切换场景，需重新调用该方法并传入新的 <codeph>sceneType</codeph>。</stentry>
                                <stentry>{"sceneType":1}</stentry>
                            </strow>
                            <strow>
                                <stentry>highPart</stentry>
                                <stentry>副歌片段的索引。你可以从 <xref keyref="onMusicCollectionResult"/> 回调中获取该索引并传入此处。索引从 0 开始。</stentry>
                                <stentry>{"format": {"highpart": 0}}</stentry>
                            </strow>
                        </simpletable>
                    </pd>
                </plentry>
                <plentry props="cpp">
                    <pt>internalSongCode</pt>
                    <pd>输出参数，音乐资源的内部歌曲编码。</pd>
                </plentry>
                <plentry props="ios">
                    <pt>songCode</pt>
                    <pd>音乐资源的唯一标识。你可以通过调用 <xref keyref="getMusicCollectionByMusicChartId"/> 或 <xref keyref="searchMusic"/> 方法，并从 <xref keyref="onMusicCollectionResult"/> 回调中获取 <codeph>songCode</codeph>。</pd>
                </plentry>
                <plentry props="ios">
                    <pt>jsonOption</pt>
                    <pd>扩展 JSON 字段，默认为 <xref keyref="NULL"/>。当前支持以下字段：
                        <ul>
                            <li><codeph>sceneType</codeph>：频道场景。
                                <ul>
                                    <li>1：直播场景：在线 K 歌房和背景音乐播放。</li>
                                    <li>2：直播场景：背景音乐播放。</li>
                                    <li>3：（默认）语聊场景：在线 K 歌房。</li>
                                    <li>4：语聊场景：背景音乐播放。</li>
                                    <li>5：VR 场景：在线 K 歌房和背景音乐播放。</li>
                                </ul>
                            </li>
                        </ul><ph>  &gt; 注意：声网会根据你在 <codeph>sceneType</codeph> 中指定的频道场景计费。不同的频道场景对应不同的计费标准，详见计费文档。若需切换频道场景，必须重新调用该方法并传入新的 <codeph>sceneType</codeph> 值。</ph><ph>  示例：<codeph>{"sceneType":1}</codeph></ph>
                        <ul>
                            <li><codeph>highPart</codeph>：副歌片段的索引。你可以从 <xref keyref="onMusicCollectionResult"/> 回调中获取该索引并传入。索引从 0 开始。</li>
                        </ul><ph>  示例：<codeph>{"format": {"highpart": 0}}</codeph></ph></pd>
                </plentry>
                <plentry props="android">
                    <pt>songCode</pt>
                    <pd>音乐资源的标识符。可通过调用 <codeph>getMusicCollectionByMusicChartId</codeph> 或 <codeph>searchMusic</codeph> 获取，并从这两个方法触发的 <xref keyref="onMusicCollectionResult"/> 回调中获取 <codeph>songCode</codeph>。</pd>
                </plentry>
                <plentry props="android">
                    <pt>jsonOption</pt>
                    <pd>
                        <note><codeph>sceneType</codeph> 会影响计费方式。不同频道场景的计费标准不同，详见计费文档。若需切换频道场景，必须使用新的 <codeph>sceneType</codeph> 值重新调用该方法。</note><ph>扩展 JSON 字段，默认为 <xref keyref="NULL"/>。目前支持以下字段：</ph><ph>| Key | Value | Example |</ph><ph>| --- | ----- | ------- |</ph><ph>| sceneType | 频道场景：</ph>
                        <ul>
                            <li>1：直播场景：在线 K 歌房和背景音乐播放。</li>
                            <li>2：直播场景：背景音乐播放。</li>
                            <li>3：（默认）声动语聊场景：在线 K 歌房。</li>
                            <li>4：声动语聊场景：背景音乐播放。</li>
                            <li>5：VR 场景：在线 K 歌房和背景音乐播放。 | {"sceneType":1} |</li>
                        </ul><ph>| highPart | 副歌片段的索引，从 <xref keyref="onMusicCollectionResult"/> 回调中获取，索引从 0 开始。 | {"format": {"highpart": 0}} |</ph></pd>
                </plentry>
            </parml>
        </section>
        <section id="return_values" props="android cpp ios">
            <title>返回值</title>
            <p props="cpp">
                <ul>
                    <li>0：方法调用成功。</li>
                    <li>&lt; 0：方法调用失败。详见[错误码](https://doc.shengwang.cn/api-ref/rtc/windows/error-code)了解详情和解决建议。详见错误码及其解决建议。</li>
                </ul>
            </p>
            <p props="ios">
                <ul>
                    <li>0：方法调用成功。</li>
                    <li>&lt; 0：方法调用失败。详见[错误码](https://doc.shengwang.cn/api-ref/rtc/ios/error-code)了解详情和解决建议。详见错误码文档获取详细信息和排查建议。</li>
                </ul>
            </p>
            <p props="android">
                <ul>
                    <li>方法调用成功，返回创建的音乐资源内部标识符。</li>
                    <li>&lt; 0：方法调用失败。详见[错误码](https://doc.shengwang.cn/api-ref/rtc/android/error-code)了解详情和解决建议。详见 <codeph>Error Codes</codeph>。</li>
                </ul>
            </p>
        </section>
    </refbody>
</reference>