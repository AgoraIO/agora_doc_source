<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="class_cameracapturerconfiguration">
  <title> <ph keyref="CameraCapturerConfiguration"/> </title>
  <shortdesc id="short"> <ph id="shortdesc">设置摄像头采集参数。</ph> </shortdesc>
  <refbody>
    <section id="prototype">
      <p outputclass="codeblock">
      <codeblock props="android" outputclass="language-java">public class CameraCapturerConfiguration {
  public enum CAMERA_DIRECTION {
    CAMERA_REAR(0),
    CAMERA_FRONT(1),
    CAMERA_EXTRAL(2);

    private int value;

    private CAMERA_DIRECTION(int v) {
      value = v;
    }

    @CalledByNative("CAMERA_DIRECTION")
    public int getValue() {
      return this.value;
    }
  }

  public enum CAMERA_FOCAL_LENGTH_TYPE {
    CAMERA_FOCAL_LENGTH_DEFAULT(0),
    CAMERA_FOCAL_LENGTH_WIDE_ANGLE(1),
    CAMERA_FOCAL_LENGTH_ULTRA_WIDE(2),
    CAMERA_FOCAL_LENGTH_TELEPHOTO(3);

    private int value;

    private CAMERA_FOCAL_LENGTH_TYPE(int v) {
      value = v;
    }

    @CalledByNative("CAMERA_FOCAL_LENGTH_TYPE")
    public int getValue() {
      return this.value;
    }
  }

  public CAMERA_DIRECTION cameraDirection = null;

  public String cameraId = null;

  public CAMERA_FOCAL_LENGTH_TYPE cameraFocalLengthType = null;

  static public class CaptureFormat {
    public int width;
    public int height;
    public int fps;

    public CaptureFormat(int width, int height, int fps) {
      this.width = width;
      this.height = height;
      this.fps = fps;
    }

    public CaptureFormat() {
      this.width = 960;
      this.height = 540;
      this.fps = 15;
    }

    @CalledByNative("CaptureFormat")
    public int getHeight() {
      return height;
    }

    @CalledByNative("CaptureFormat")
    public int getWidth() {
      return width;
    }

    @CalledByNative("CaptureFormat")
    public int getFps() {
      return fps;
    }

    @Override
    public String toString() {
      return "CaptureFormat{"
          + "width=" + width + ", height=" + height + ", fps=" + fps + '}';
    }
  }

  public CaptureFormat captureFormat;

  public Boolean followEncodeDimensionRatio = null;

  public CameraCapturerConfiguration(CAMERA_DIRECTION cameraDirection) {
    this.cameraDirection = cameraDirection;
    this.captureFormat = new CaptureFormat(0, 0, 0);
  }

  public CameraCapturerConfiguration(
      CAMERA_DIRECTION cameraDirection, CAMERA_FOCAL_LENGTH_TYPE cameraFocalLengthType) {
    this.cameraDirection = cameraDirection;
    this.cameraFocalLengthType = cameraFocalLengthType;
    this.captureFormat = new CaptureFormat(0, 0, 0);
  }

  public CameraCapturerConfiguration(CaptureFormat captureFormat) {
    this.captureFormat = captureFormat;
  }

  public CameraCapturerConfiguration(
      CAMERA_DIRECTION cameraDirection, CaptureFormat captureFormat) {
    this.cameraDirection = cameraDirection;
    this.captureFormat = captureFormat;
  }

  public CameraCapturerConfiguration(CAMERA_DIRECTION cameraDirection,
      CAMERA_FOCAL_LENGTH_TYPE cameraFocalLengthType, CaptureFormat captureFormat) {
    this.cameraDirection = cameraDirection;
    this.cameraFocalLengthType = cameraFocalLengthType;
    this.captureFormat = captureFormat;
  }

  @CalledByNative
  public CAMERA_DIRECTION getCameraDirection() {
    return cameraDirection;
  }

  @CalledByNative
  public String getCameraId() {
    return cameraId;
  }

  @CalledByNative
  public CAMERA_FOCAL_LENGTH_TYPE getCameraFocalLengthType() {
    return cameraFocalLengthType;
  }

  @CalledByNative
  public CaptureFormat getCaptureFormat() {
    return captureFormat;
  }

  @CalledByNative
  public Boolean isFollowEncodeDimensionRatio() {
    return followEncodeDimensionRatio;
  }

  @Override
  public String toString() {
    return "CameraCapturerConfiguration{"
        + "cameraDirection=" + cameraDirection + ", captureDimensions=" + captureFormat
        + ", cameraId=" + cameraId + ", followEncodeDimensionRatio=" + followEncodeDimensionRatio
        + ", cameraFocalLengthType=" + cameraFocalLengthType + '}';
  }
}</codeblock>
      <codeblock props="hmos" outputclass="language-arkts">export class CameraCapturerConfiguration {
  public cameraDirection: Constants.CameraDirection = Constants.CameraDirection.FRONT;
  public cameraFormat: CaptureFormat = new CaptureFormat();
  public followEncodeDimensionRatio: boolean = true;
}</codeblock>
            <codeblock props="ios mac" outputclass="language-objectivec">@interface AgoraCameraCapturerConfiguration: NSObject
@property (assign, nonatomic) AgoraCameraDirection cameraDirection;
@property(assign, nonatomic) AgoraFocalLength cameraFocalLengthType;
@property (copy, nonatomic) NSString * _Nullable deviceId;
@property(assign, nonatomic) CGSize dimensions;
@property(assign, nonatomic) int frameRate;
@property(assign, nonatomic) BOOL followEncodeDimensionRatio;
@end</codeblock>
      <codeblock props="cpp unreal" outputclass="language-cpp">struct CameraCapturerConfiguration {
#if defined(__ANDROID__) || (defined(__APPLE__) &amp;&amp; TARGET_OS_IOS) || defined(__OHOS__)
  Optional&lt;CAMERA_DIRECTION&gt; cameraDirection;
#else
  Optional&lt;const char *&gt; deviceId;
#endif
#if defined(__ANDROID__)
  Optional&lt;const char *&gt; cameraId;
#endif
  Optional&lt;bool&gt; followEncodeDimensionRatio;
  VideoFormat format;
};</codeblock>
         <codeblock props="bp" outputclass="language-cpp">USTRUCT(BlueprintType)
struct FCameraCapturerConfiguration
{
	GENERATED_BODY()
public:
	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Agora|CameraCapturerConfiguration")
	ECAMERA_DIRECTION cameraDirection = ECAMERA_DIRECTION::CAMERA_FRONT;
	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Agora|CameraCapturerConfiguration")
	ECAMERA_FOCAL_LENGTH_TYPE cameraFocalLengthType = ECAMERA_FOCAL_LENGTH_TYPE::CAMERA_FOCAL_LENGTH_DEFAULT;
		UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Agora|CameraCapturerConfiguration")
	bool deviceId_SetValue = false;
	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Agora|CameraCapturerConfiguration")
	FString deviceId = "";

	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Agora|CameraCapturerConfiguration")
	bool cameraId_SetValue = false;
	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Agora|CameraCapturerConfiguration")
	FString cameraId = "";
	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Agora|CameraCapturerConfiguration")
	FVideoFormat format = FVideoFormat();
	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Agora|ChannelMediaOptions")
	EAgoraOptional followEncodeDimensionRatio = EAgoraOptional::AGORA_NULL_VALUE;

	FCameraCapturerConfiguration(){}
	FCameraCapturerConfiguration(const agora::rtc::CameraCapturerConfiguration &amp; AgoraData){
#if defined(__ANDROID__) || (defined(__APPLE__) &amp;&amp; TARGET_OS_IOS)
		cameraDirection = static_cast&lt;ECAMERA_DIRECTION&gt;(AgoraData.cameraDirection.value());
		cameraFocalLengthType = static_cast&lt;ECAMERA_FOCAL_LENGTH_TYPE&gt;(AgoraData.cameraFocalLengthType.value());
#else
		SET_UEBP_OPTIONAL_VAL_FString(this-&gt;deviceId, AgoraData.deviceId);
#endif
#if defined(__ANDROID__)
		cameraId = UTF8_TO_TCHAR(AgoraData.cameraId.value());
#endif
		format = FVideoFormat(AgoraData.format);
		SET_UEBP_OPTIONAL_VAL_BOOL(	followEncodeDimensionRatio ,AgoraData.followEncodeDimensionRatio)
	}
	agora::rtc::CameraCapturerConfiguration CreateAgoraData() const {
		agora::rtc::CameraCapturerConfiguration AgoraData;
#if defined(__ANDROID__) || (defined(__APPLE__) &amp;&amp; TARGET_OS_IOS)
		AgoraData.cameraDirection = static_cast&lt;agora::rtc::CAMERA_DIRECTION&gt;(cameraDirection);
		AgoraData.cameraFocalLengthType = static_cast&lt;agora::rtc::CAMERA_FOCAL_LENGTH_TYPE&gt;(cameraFocalLengthType);
#else
		SET_AGORA_OPTIONAL_VAL_CHARPTR______MEMOALLOC(AgoraData.deviceId, this-&gt;deviceId)
#endif
#if defined(__ANDROID__)
		SET_AGORA_OPTIONAL_VAL_CHARPTR______MEMOALLOC(
				AgoraData.cameraId,this-&gt;cameraId)
			 
#endif
		AgoraData.format = format.CreateAgoraData();
		SET_AGORA_OPTIONAL_VAL_BOOL(AgoraData.followEncodeDimensionRatio, this-&gt;followEncodeDimensionRatio)
		return AgoraData;
	}
	void FreeAgoraData(agora::rtc::CameraCapturerConfiguration&amp; AgoraData) const {
		format.FreeAgoraData(AgoraData.format);

#if defined(__ANDROID__) || (defined(__APPLE__) &amp;&amp; TARGET_OS_IOS)
#else
		SET_AGORA_OPTIONAL_VAL_CHARPTR______MEMOFREE(AgoraData.deviceId)
#endif
#if defined(__ANDROID__)
			SET_AGORA_OPTIONAL_VAL_CHARPTR______MEMOFREE(AgoraData.cameraId)
#endif
	}
};</codeblock>
      <codeblock props="electron" outputclass="language-typescript">export class CameraCapturerConfiguration {
  
  deviceId?: string;
  
  format?: VideoFormat;

  followEncodeDimensionRatio?: boolean;

}</codeblock>
      <codeblock props="unity cs" outputclass="language-csharp">public class CameraCapturerConfiguration : IOptionalJsonParse
    {
        public Optional&lt;CAMERA_DIRECTION&gt; cameraDirection = new Optional&lt;CAMERA_DIRECTION&gt;();
        public Optional&lt;CAMERA_FOCAL_LENGTH_TYPE&gt; cameraFocalLengthType = new Optional&lt;CAMERA_FOCAL_LENGTH_TYPE&gt;();
        public Optional&lt;string&gt; deviceId = new Optional&lt;string&gt;();
        public Optional&lt;string&gt; cameraId = new Optional&lt;string&gt;();
        public Optional&lt;bool&gt; followEncodeDimensionRatio = new Optional&lt;bool&gt;();
        public VideoFormat format;

        public CameraCapturerConfiguration()
        {
            this.format = new VideoFormat(0, 0, 0);
        }

        public CameraCapturerConfiguration(Optional&lt;CAMERA_DIRECTION&gt; cameraDirection, Optional&lt;CAMERA_FOCAL_LENGTH_TYPE&gt; cameraFocalLengthType, Optional&lt;string&gt; deviceId, Optional&lt;string&gt; cameraId, Optional&lt;bool&gt; followEncodeDimensionRatio, VideoFormat format)
        {
            this.cameraDirection = cameraDirection;
            this.cameraFocalLengthType = cameraFocalLengthType;
            this.deviceId = deviceId;
            this.cameraId = cameraId;
            this.followEncodeDimensionRatio = followEncodeDimensionRatio;
            this.format = format;
        }
    }</codeblock>
      <codeblock props="rn" outputclass="language-typescript">export class CameraCapturerConfiguration {
  
  cameraDirection?: CameraDirection;

  cameraFocalLengthType?: CameraFocalLengthType;
  
  deviceId?: string;

  cameraId?: string;
  
  format?: VideoFormat;

  followEncodeDimensionRatio?: boolean;

}</codeblock>
      <codeblock props="flutter" outputclass="language-dart">@JsonSerializable(explicitToJson: true, includeIfNull: false)
class CameraCapturerConfiguration {
  const CameraCapturerConfiguration(
      {this.cameraDirection,
      this.cameraFocalLengthType,
      this.deviceId,
      this.cameraId,
      this.followEncodeDimensionRatio,
      this.format});

  @JsonKey(name: 'cameraDirection')
  final CameraDirection? cameraDirection;

  @JsonKey(name: 'cameraFocalLengthType')
  final CameraFocalLengthType? cameraFocalLengthType;

  @JsonKey(name: 'deviceId')
  final String? deviceId;

  @JsonKey(name: 'cameraId')
  final String? cameraId;

  @JsonKey(name: 'followEncodeDimensionRatio')
  final bool? followEncodeDimensionRatio;

  @JsonKey(name: 'format')
  final VideoFormat? format;

  factory CameraCapturerConfiguration.fromJson(Map&lt;String, dynamic&gt; json) =&gt;
      _$CameraCapturerConfigurationFromJson(json);

  Map&lt;String, dynamic&gt; toJson() =&gt; _$CameraCapturerConfigurationToJson(this);
}</codeblock>            
            <codeblock props="reserve" outputclass="language-cpp"/></p></section>
    <section id="parameters">
      <title> <text conref="../conref/conref_api_metadata.dita#conref_api_metadata/property"/>
      </title>
      <parml>
            <plentry props="android bp cpp cs flutter hmos ios rn unity unreal">
                <pt props="android ios">cameraDirection</pt>
                <pd>（可选）摄像头方向。详见 <xref keyref="CAMERA_DIRECTION"/>。
          <note type="attention" props="bp cpp flutter unity unreal">该参数仅适用于 Android 和 iOS 平台。</note></pd>
                <pd props="android">（可选）摄像头方向。详见 <xref keyref="CAMERA_DIRECTION"/>。</pd>
                <pd props="ios">（仅适用于 iOS，可选）摄像头方向。详见 <xref keyref="CAMERA_DIRECTION"/>。</pd>
                </plentry>
            <plentry props="android bp cpp flutter rn unity unreal">
                <pt props="android">cameraId</pt>
                <pd>（可选）摄像头 ID。默认为前置摄像头对应的摄像头 ID。你可以通过 Android 原生系统 API 获取摄像头 ID，详见 <xref keyref="camera1-link"/> 和 <xref keyref="camera2-link"/>。
        <note type="attention"><ul>
        <li props="bp cpp flutter rn unity unreal">该参数仅适用于 Android。</li>
        <li>该参数和 <parmname>cameraDirection</parmname> 均用于指定摄像头，二者为互斥关系，你可以按需选用其中之一，具体区别如下：<ul>
          <li>通过 <parmname>cameraDirection</parmname> 指定摄像头的方式更为简便。你只需指定摄像头的方向（前置或后置），无需指定具体的摄像头 ID，SDK 会通过系统 API 去检索和确定实际的摄像头 ID。</li>
          <li>通过 <parmname>cameraId</parmname> 则可以更精确地指定某个特定的摄像头。对于多摄像头的设备，<parmname>cameraDirection</parmname> 无法识别或访问全部可用摄像头，这种情况建议使用 <parmname>cameraId</parmname> 直接指定你想要的摄像头 ID。</li>
        </ul></li></ul></note>
        </pd>
                <pd props="android">（可选）摄像头 ID，默认值为前置摄像头的 ID。你可以通过 Android 原生系统 API 获取摄像头 ID，详见 <codeph>Camera.open</codeph> 和 <codeph>CameraManager.getCameraIdList</codeph>。该参数仅适用于 Android 平台。该参数与 <codeph>cameraDirection</codeph> 互斥，你可以根据需要选择其中一个：
                    <ul>
                        <li>使用 <codeph>cameraDirection</codeph> 指定摄像头方向（前置或后置）更为简单，SDK 会通过 Android 原生系统 API 获取并确认实际的摄像头 ID。</li>
                        <li>使用 <codeph>cameraId</codeph> 可更精确地指定某个摄像头，适用于多摄像头设备，<codeph>cameraDirection</codeph> 无法识别或访问所有摄像头时，建议使用 <codeph>cameraId</codeph>。</li>
                        </ul>
                    </pd>
                </plentry>
            <plentry props="android bp cpp flutter ios rn unity unreal">
                <pt props="ios">cameraFocalLengthType</pt>
                <pd>（可选）摄像头的焦距类型。详见 <xref keyref="CAMERA_FOCAL_LENGTH_TYPE"/>。
        <note type="attention"><ul>
          <li props="bp cpp flutter unity unreal">该参数仅适用于 Android 和 iOS。</li>
          <li props="android bp cpp flutter rn unity unreal">如需设置摄像头的焦距类型，仅支持通过 <parmname>cameraDirection</parmname> 指定摄像头，不支持通过 <parmname>cameraId</parmname> 进行指定。</li>
          <li props="bp cpp flutter ios rn unity unreal">部分 iOS 设备的后置摄像头为多个摄像头组成的融合镜头，如双摄（广角和超广角）或三摄（广角、超广角和长焦），对于这种具备超广角能力的融合镜头，你可以通过以下任意一种方式实现超广角的采集效果：
            <ul>
              <li>方式一：将该参数设置为 <apiname keyref="CAMERA_FOCAL_LENGTH_ULTRA_WIDE"/> (2)（超广角镜头）。</li>
              <li>方式二：将该参数设置为 <apiname keyref="CAMERA_FOCAL_LENGTH_DEFAULT"/> (0)（标准镜头），然后调用 <xref keyref="setCameraZoomFactor"/> 将相机缩放比例设置为小于 1.0 的数值，最小可以设置为 0.5。</li></ul>
            区别为方式一的超广角大小不可调节，方式二支持自由调节相机的缩放比例。</li>
        </ul></note>
        </pd>
                <pd props="ios">（仅适用于 iOS，可选）摄像头焦距类型。详见 <xref keyref="CAMERA_FOCAL_LENGTH_TYPE"/>。对于配备多摄像头的 iOS 设备（如双摄或三摄），你可以通过以下方式之一获取超广角视角的视频：
                    <ul>
                        <li>方法一：将该参数设置为 <ph keyref="CAMERA_FOCAL_LENGTH_ULTRA_WIDE"/>（2）（超广角镜头）。</li>
                        <li>方法二：将该参数设置为 <ph keyref="CAMERA_FOCAL_LENGTH_DEFAULT"/>（0）（标准镜头），然后调用 <xref keyref="setCameraZoomFactor"/> 将变焦因子设置为小于 1.0 的值，最小为 0.5。两种方法的区别在于，方法一的超广角尺寸不可调整，而方法二支持自由调整变焦因子。</li>
                        </ul>
                    </pd>
                </plentry>
            <plentry props="android cpp framework hmos">
                <pt props="cpp framework">format</pt>
                <pt props="android hmos">captureFormat</pt>
                <pd props="cpp">（可选）视频帧格式。详见 <xref keyref="VideoFormat"/>。</pd>
                </plentry>
            <plentry props="apple">
                <pt>dimension</pt>
                <pd>（可选）视频帧的分辨率 (px)。默认值为 960 × 540。</pd>
            </plentry>
            <plentry props="apple ios">
                <pt props="ios">frameRate</pt>
                <pd>（可选）视频帧的帧率 (fps)。默认值为 15。</pd>
                <pd props="ios">（可选）视频帧的帧率（单位：fps）。默认值为 15。</pd>
            </plentry>
            <plentry props="apple bp cpp cs electron flutter ios unity unreal">
                <pt props="cpp ios">deviceId</pt>
                <pd>（可选）摄像头的 ID。<ph props="cpp electron flutter unreal">最大长度为 <xref keyref="MAX_DEVICE_ID_LENGTH_TYPE"/>。</ph>
          <note type="attention" props="bp cpp flutter unity unreal">该参数仅适用于 Windows 和 macOS。</note></pd>
                <pd props="cpp">摄像头 ID，最大长度为 <xref keyref="MAX_DEVICE_ID_LENGTH_TYPE"/>。</pd>
                <pd props="ios">（仅适用于 macOS）摄像头设备的 ID。</pd>
                </plentry>
            <plentry props="android cpp ios">
                <pt props="android cpp ios">followEncodeDimensionRatio</pt>
                <pd>（可选）是否跟随 <xref keyref="setVideoEncoderConfiguration"/> 中设置的视频宽高比：             
          <ul>
          <li><codeph><ph keyref="true"/></codeph>：(默认) 跟随。SDK 会将采集到的视频按照已设置的视频宽高比进行裁剪<ph props="android apple cpp cs electron flutter rn unity unreal">，会同步改变本地预览画面、<xref keyref="onCaptureVideoFrame"/> 和 <xref keyref="onPreEncodeVideoFrame"/> 中的视频画面</ph>。</li>
          <li><codeph><ph keyref="false"/></codeph>：不跟随。SDK不改变采集到的视频帧宽高比。</li>
          </ul></pd>
                <pd props="android cpp">（可选）是否遵循 <xref keyref="setVideoEncoderConfiguration"/> 中设置的视频宽高比：
                    <ul>
                        <li><codeph><ph keyref="true"/></codeph>：（默认）遵循设置的视频宽高比。SDK 会根据设置的视频宽高比裁剪采集的视频，并同步更新本地预览画面以及 <xref keyref="onCaptureVideoFrame"/> 和 <xref keyref="onPreEncodeVideoFrame"/> 中的视频帧。</li>
                        <li><codeph><ph keyref="false"/></codeph>：不裁剪采集的视频帧，SDK 不会更改采集视频帧的宽高比。</li>
                        </ul>
                    </pd>
                <pd props="ios">（可选）是否遵循通过 <xref keyref="setVideoEncoderConfiguration"/> 设置的视频宽高比：
                    <ul>
                        <li><codeph><ph keyref="true"/></codeph>：（默认）遵循设置的视频宽高比。SDK 会根据设置的视频宽高比裁剪采集的视频，并同步更新本地预览画面以及 <xref keyref="onCaptureVideoFrame"/> 和 <xref keyref="onPreEncodeVideoFrame"/> 中的视频帧。</li>
                        <li><codeph><ph keyref="false"/></codeph>：不遵循设置的视频宽高比。SDK 不会更改采集视频帧的宽高比。</li>
                        </ul>
                    </pd>
                </plentry>
            <plentry props="ios">
                <pt props="ios">dimensions</pt>
                <pd props="ios">（可选）视频帧的尺寸（单位：像素）。默认值为 960 × 540。</pd>
            </plentry>
            </parml> </section>
  </refbody>
</reference>
